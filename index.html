<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Avance</title>
    <!-- Carga de Tailwind CSS para estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de Chart.js para gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Fuente Inter */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Zebra striping para tablas */
        #tabla-desglose-body tr:nth-child(even),
        #tabla-sucursal-body tr:nth-child(even) {
            background-color: #f9fafb; /* gray-50 */
        }
    </style>
</head>
<body class="bg-gray-50 text-slate-800">

    <!-- Encabezado Oscuro -->
    <header class="bg-slate-800 shadow-md">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
            <div class="flex justify-between items-center h-16">
                <h1 class="text-xl md:text-2xl font-bold text-white">Avance capacitación técnicos especiales (Instalación redes mesh)</h1>
                <span class="text-sm font-medium text-slate-300 hidden sm:block">Resumen Ejecutivo</span>
            </div>
        </div>
    </header>

    <!-- Contenido Principal -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl py-8">
        
        <!-- Sección de KPIs Principales con Iconos -->
        <section id="kpis" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            
            <!-- Card: Total Técnicos -->
            <div class="bg-white p-6 rounded-xl shadow-md flex items-center space-x-4">
                <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                    <!-- Icono SVG (Users) -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                </div>
                <div>
                    <div class="text-sm font-medium text-slate-500">Técnicos (Total)</div>
                    <div id="kpi-total-tecnicos" class="text-3xl font-bold text-slate-900 mt-1">...</div>
                </div>
            </div>

            <!-- Card: Total Evaluados -->
            <div class="bg-white p-6 rounded-xl shadow-md flex items-center space-x-4">
                <div class="p-3 rounded-full bg-green-100 text-green-600">
                    <!-- Icono SVG (User Check) -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div>
                    <div class="text-sm font-medium text-slate-500">Técnicos Evaluados</div>
                    <div id="kpi-total-evaluados" class="text-3xl font-bold text-slate-900 mt-1">...</div>
                </div>
            </div>

            <!-- Card: Total Pendientes -->
            <div class="bg-white p-6 rounded-xl shadow-md flex items-center space-x-4">
                <div class="p-3 rounded-full bg-amber-100 text-amber-600">
                    <!-- Icono SVG (User Clock) -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div>
                    <div class="text-sm font-medium text-slate-500">Técnicos Pendientes</div>
                    <div id="kpi-total-pendientes" class="text-3xl font-bold text-slate-900 mt-1">...</div>
                </div>
            </div>

            <!-- Card: Avance General -->
            <div class="bg-white p-6 rounded-xl shadow-md flex items-center space-x-4">
                <div class="p-3 rounded-full bg-indigo-100 text-indigo-600">
                    <!-- Icono SVG (Percentage) - CORREGIDO -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 14.25l6-6m-4-3.5a2.25 2.25 0 114.5 0 2.25 2.25 0 01-4.5 0zM17.25 17.25a2.25 2.25 0 110-4.5 2.25 2.25 0 010 4.5z" />
                    </svg>
                </div>
                <div>
                    <div class="text-sm font-medium text-slate-500">Avance General</div>
                    <div id="kpi-porcentaje-general-text" class="text-3xl font-bold text-slate-900 mt-1">...</div>
                </div>
            </div>
        </section>

        <!-- Sección de Gráficos Principales -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-8">
            
            <!-- Columna Principal: Nuevo Gráfico de Barras -->
            <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-xl font-semibold mb-4 text-slate-800">Avance por Región</h2>
                <div class="relative h-[400px]">
                    <canvas id="regionBarChart"></canvas>
                </div>
            </div>
            
            <!-- Columna Lateral: Gráfico de Dona General -->
            <div class="bg-white p-6 rounded-xl shadow-md flex flex-col items-center">
                <h2 class="text-xl font-semibold text-slate-800">Avance General</h2>
                <div id="kpi-chart-general-wrapper" class="relative w-full max-w-[280px] mt-4">
                     <canvas id="kpi-chart-general"></canvas>
                     <div id="kpi-porcentaje-general" class="absolute inset-0 flex items-center justify-center text-5xl font-bold text-slate-800">
                         ...
                     </div>
                </div>
                <div id="kpi-fraccion-general-wrapper" class="text-2xl font-semibold text-slate-600 mt-6">
                    <span id="kpi-fraccion-general">...</span>
                </div>
                <span class="text-sm font-medium text-slate-500">Evaluados / Total</span>
            </div>
        </section>


        <!-- Sección de Tablas de Desglose -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-8">
            
            <!-- Tabla de Sucursales (más grande) -->
            <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                <h2 id="sucursal-title" class="text-xl font-semibold mb-4">Avance por Sucursal</h2>
                <div class="overflow-x-auto max-h-[600px] overflow-y-auto">
                    <table class="w-full min-w-[600px]">
                        <thead class="border-b border-slate-200 sticky top-0 bg-white">
                            <tr>
                                <th class="text-left text-sm font-semibold text-gray-600 p-3">Sucursal</th>
                                <th class="text-left text-sm font-semibold text-gray-600 p-3">Avance</th>
                                <th class="text-right text-sm font-semibold text-gray-600 p-3">Evaluados / Total</th>
                            </tr>
                        </thead>
                        <tbody id="tabla-sucursal-body">
                            <tr><td colspan="3" class="text-center p-6 text-slate-500">Cargando datos...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Tabla de Desglose (más pequeña) -->
            <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-xl font-semibold mb-4">Desglose por Región</h2>
                <div class="overflow-x-auto max-h-[600px] overflow-y-auto">
                    <table class="w-full min-w-[300px]">
                        <thead class="border-b border-slate-200 sticky top-0 bg-white">
                            <tr>
                                <th class="text-left text-sm font-semibold text-gray-600 p-2">Región</th>
                                <th class="text-center text-sm font-semibold text-green-600 p-2" title="Aprobado">Apr</th>
                                <th class="text-center text-sm font-semibold text-red-600 p-2" title="Reprobado">Rep</th>
                                <th class="text-center text-sm font-semibold text-blue-600 p-2" title="Extraordinario">Ext</th>
                                <th class="text-center text-sm font-semibold text-amber-600 p-2" title="Sin Evaluación">Pen</th>
                            </tr>
                        </thead>
                        <tbody id="tabla-desglose-body">
                            <tr><td colspan="5" class="text-center p-6 text-slate-500">Cargando datos...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </section>

        <!-- Nueva Sección de Análisis Pareto -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8">
            
            <!-- Pareto Región -->
            <div class="bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-xl font-semibold mb-4 text-slate-800">Pareto de Pendientes (Región)</h2>
                <p class="text-sm text-slate-500 mb-4">Regiones ordenadas por el mayor número de técnicos pendientes.</p>
                <div class="relative h-[400px]">
                    <canvas id="paretoRegionChart"></canvas>
                </div>
            </div>
            
            <!-- Pareto Sucursal -->
            <div class="bg-white p-6 rounded-xl shadow-md">
                <h2 id="pareto-sucursal-title" class="text-xl font-semibold mb-4 text-slate-800">Pareto de Pendientes (Top 20 Sucursales)</h2>
                <p id="pareto-sucursal-desc" class="text-sm text-slate-500 mb-4">Las 20 sucursales con más técnicos pendientes.</p>
                <div class="relative h-[400px]">
                    <canvas id="paretoSucursalChart"></canvas>
                </div>
            </div>

        </section>

    </main>

    <script>
        // Paleta de colores para las 9 regiones
        const REGION_COLORS = {
            'BAJIO': '#3b82f6',     // blue-500
            'CENTRO': '#10b981',    // emerald-500
            'GOLFO': '#ef4444',     // red-500
            'MICHOACAN': '#f59e0b', // amber-500
            'NORTE': '#6366f1',     // indigo-500
            'OCCIDENTE': '#84cc16', // lime-500
            'PACIFICO': '#0ea5e9',  // sky-500
            'PENINSULA': '#d946ef', // fuchsia-500
            'SURESTE': '#f97316',   // orange-500
            '(Sin Región)': '#6b7280', // gray-500 - Corregido
            'default': '#6b7280'    // gray-500
        };

        // Función para obtener color
        function getColor(region) {
            return REGION_COLORS[region] || REGION_COLORS['default'];
        }

        // Los datos crudos proporcionados por el usuario
        // CORRECCIÓN: "GUADALAJAFRA" -> "GUADALAJARA" en la línea de VENEGAS GONZALEZ
        const rawData = `Técnicos Especiales	Evaluación	Sucursal	Region	Puesto
ABAD DAVILA EFREN ARTURO	SIN EVALUACIÓN	CENTRO	HUEHUETOCA
AGATON FERNANDEZ EDGAR	APROBADO	GOLFO	XALAPA
AGUILA ZAMORA JOSE ALFREDO	APROBADO	SURESTE	PUEBLA
AGUILAR ALONSO CRISTIAN	APROBADO	BAJIO	LEON
AGUILAR BAUTISTA BRAYAN ALFONSO	SIN EVALUACIÓN	NORTE	SANTA CATARINA
AGUILAR DE LA PORTILLA JOSE ALBERTO	APROBADO	CENTRO	TOLUCA
AGUILAR GRACIANO ALEXIS OBED	APROBADO	PACIFICO	LOS MOCHIS
AGUILERA SOLIS JUAN CARLOS	APROBADO	PACIFICO	MEXICALI
ALATORRE MARIN JOEL	APROBADO	GOLFO	VERACRUZ
ALATORRE VAZQUEZ JOSE LUIS	APROBADO	OCCIDENTE	GUADALAJARA
ALCALA TORRES FERNANDO FERMIN	SIN EVALUACIÓN	BAJIO	LEON
ALCANTAR RAMIREZ JUAN CARLOS	APROBADO	PACIFICO	HERMOSILLO
ALCARAZ CALDERA JUAN MANUEL	APROBADO	OCCIDENTE	TLAJOMULCO
ALMAZAN GOMEZ ALEXIS	APROBADO	CENTRO	TOLUCA
ALMEDA GONZALEZ JOSE SANTOS	APROBADO	NORTE	CD JUAREZ
ALVARADO FELIX OMAR ANDRES	APROBADO	PACIFICO	MEXICALI
ALVAREZ DIAZ EDUARDO	APROBADO	OCCIDENTE	TLAJOMULCO
ALVAREZ RUIZ ALDO	APROBADO	OCCIDENTE	ZAMORA
ANAYA RIVERA DIEGO ARMANDO	APROBADO	BAJIO	LEON
ANDRADE ALVAREZ FERNANDO HUGO	SIN EVALUACIÓN	BAJIO	LEON
ANDRADE FLORES JORGE ALBERTO	APROBADO	OCCIDENTE	ZAPOPAN
ANDRADE MARQUEZ CHRISTIAN LEONARDO	APROBADO	OCCIDENTE	GUADALAJARA NORTE
ANGEL RODRIGUEZ ALONSO BONFILIO	APROBADO	SURESTE	TUXTLA GUTIERREZ
ANGELES RIVERA ARTURO JAVIER	APROBADO	OCCIDENTE	GUADALAJARA
ANGUIANO FUENTES GERARDO	APROBADO	OCCIDENTE	GUADALAJARA
APODACA SOTO SERGIO JESUS	APROBADO	PACIFICO	CULIACAN
ARANA AGUILAR JESUS ARNOLDO	APROBADO	PACIFICO	CULIACAN
ARAUJO GARCIA ROGELIO	APROBADO	GOLFO	VERACRUZ
ARAUJO SILVAS ABDIEL OMAR	APROBADO	PACIFICO	GUASAVE
ARCE BERNAL FAUSTO ABRAHAM	APROBADO	PACIFICO	MEXICALI
ARECHIGA TORRES CARLOS ALBERTO	APROBADO	PACIFICO	CULIACAN
ARENAS AGUAYO LUIS GERARDO	APROBADO	BAJIO	LEON
ARENAS ALBA JUAN LUIS	APROBADO	BAJIO	LEON
AREVALO RIVERA EMMANUEL ALEJANDRO	APROBADO	BAJIO	LEON
ARIAS CASTILLO ULISES	APROBADO	MICHOACAN	MORELIA
ARREDONDO ARAGON FERNANDO GUADALUPE	APROBADO	PACIFICO	TIJUANA
ARREDONDO AVALOS URIEL	EXTRAORDINARIO	BAJIO	SAN LUIS POTOSI
ARROYO SUAREZ JOSE BENITO	APROBADO	OCCIDENTE	GUADALAJARA
ATTWELL CASTRO GABRIEL	APROBADO	PACIFICO	HERMOSILLO
AVALOS BAUTISTA ISAAC VLADIMIR	APROBADO	OCCIDENTE	ZAMORA
AVALOS MEDINA JUAN	APROBADO	BAJIO	LEON
AVELAR GARCIA JOSE ARTURO	SIN EVALUACIÓN	PACIFICO	MAZATLAN
AVELAR TORRES RAFAEL	APROBADO	OCCIDENTE	GUADALAJARA
AVILA MUÑOZ WILEBALDO	REPROBADO	CENTRO	TLALNEPANTLA
AVILA QUINTERO GUILLERMO BALTAZAR	APROBADO	PACIFICO	CULIACAN
AVILES HERNANDEZ GERARDO	APROBADO	OCCIDENTE	TLAQUEPAQUE
BADILLO FRANCO LEONARDO	APROBADO	SURESTE	PUEBLA
BALBUENA NUÑEZ CANDIDO	APROBADO	SURESTE	ACAPULCO
BARBA ENRIQUEZ MANUEL DE JESUS	APROBADO	PACIFICO	HERMOSILLO
BARRAGAN REYES GIOVANNI	APROBADO	NORTE	TORREON
BARRERA CASTRO CARLOS ANDRES	APROBADO	CENTRO	ZUMPANGO
BARRERAS VALDEZ JOSUE	APROBADO	PACIFICO	OBREGON
BASTIDAS CHAIDEZ OSVALDO GUADALUPE	APROBADO	PACIFICO	CULIACAN
BATALLA DIAZ CARLOS JESUS	APROBADO	SURESTE	ACAPULCO
BAUTISTA DELGADO ISMAEL ANDRES	APROBADO	NORTE	MONTERREY
BEAUREGARD MOSQUEDA JOSE VIJAY	APROBADO	GOLFO	VERACRUZ
BEDOLLA DIAZ IAN EDUARDO	APROBADO	SURESTE	CUERNAVACA
BELTRAN DELGADO JONATHAN EFRAIN	APROBADO	PACIFICO	CULIACAN
BELTRAN SANCHEZ JUAN MANUEL	APROBADO	PACIFICO	CULIACAN
BELTRAN SARABIA OMAR	APROBADO	PACIFICO	CULIACAN
BELTRANI OLMEDO ERICK PAVEL	SIN EVALUACIÓN	GOLFO	PAPANTLA
BENITEZ ARJONA RICARDO	APROBADO	OCCIDENTE	TEPIC
BERNAL MELCHOR JORGE ALBERTO	APROBADO	PACIFICO	CULIACAN
BIBIANO MARTINEZ FRANCISCO LEONEL	APROBADO	SURESTE	TUXTLA GUTIERREZ
BOJORQUEZ MURILLO IVAN RAMIRO	SIN EVALUACIÓN	PACIFICO	CULIACAN
BORREGO MACEDO HUGO ANTONIO	APROBADO	OCCIDENTE	TEPIC
BUENROSTRO BARRAGAN JUAN ENRIQUE	APROBADO	OCCIDENTE	COLIMA
BURGUEÑO LIZARRAGA RAFAEL	APROBADO	PACIFICO	MAZATLAN
CABANILLAS BAÑUELOS MARTIN EDUARDO	APROBADO	PACIFICO	GUAMUCHIL
CABELLO GONZALEZ JUAN ANTONIO	SIN EVALUACIÓN	BAJIO	LEON
CALLEROS VAZQUEZ ZAYETH	APROBADO	NORTE	DURANGO
CAMACHO BASURTO JOSE SARE	APROBADO	CENTRO	TEXCOCO
CAMARENA AGUIÑAGA EDGAR EMMANUEL	SIN EVALUACIÓN	BAJIO	LEON
CAMARGO RABAGO MARCOS	EXTRAORDINARIO	PACIFICO	LOS MOCHIS
CAMPOS SILVA GONZALO MANUEL	APROBADO	OCCIDENTE	TLAQUEPAQUE
CARDENAS MORA TOMAS ADRIAN	APROBADO	OCCIDENTE	GUADALAJARA NORTE
CARDOSO PEREZ ISRAEL	APROBADO	CENTRO	ZUMPANGO
CARREON ASCENCION DIEGO ALEJANDRO	APROBADO	MICHOACAN	MORELIA
CARREON SANCHEZ JUAN DANIEL	APROBADO	SURESTE	PUEBLA
CARRERA BELLO FERNANDO BRAYAN	APROBADO	CENTRO	IZTACALCO
CARRILLO CEBALLOS AARON ALEXIS	APROBADO	OCCIDENTE	COLIMA
CARRILLO GONZALEZ DAVID	APROBADO	BAJIO	AGUASCALIENTES
CASTAÑON PALOMARES OSNAR RICARDO	APROBADO	NORTE	DURANGO
CASTILLO ALAMILLA RICARDO ULISES	APROBADO	BAJIO	LEON
CASTILLO LOPEZ JUAN FRANCISCO	APROBADO	PACIFICO	CULIACAN
CASTILLO MONTES MAURICIO	APROBADO	OCCIDENTE	COLIMA
CASTILLO SALAS RAMON	APROBADO	BAJIO	AGUASCALIENTES
CASTRO CORDOVA JONATHAN ESTEBAN	APROBADO	NORTE	DURANGO
CAUDILLO GARCIA JORGE BENJAMIN	APROBADO	PACIFICO	LA PAZ
CERPA LOPEZ ROBERTO CARLOS	APROBADO	OCCIDENTE	GUADALAJARA
CERVANTES ARELLANO ALFONSO	APROBADO	OCCIDENTE	GUADALAJARA
CERVANTES RAMIREZ JOSE ALEJANDRO	APROBADO	BAJIO	LEON
CHALE MALDONADO JESUS OMAR	SIN EVALUACIÓN	PENINSULA	MERIDA
CHAVEZ AVILA ARTURO	APROBADO	MICHOACAN	MORELIA
CHAVEZ CASTAÑEDA VICTOR ALFONSO	APROBADO	PACIFICO	OBREGON
CHAVEZ QUIROZ GUSTAVO	APROBADO	BAJIO	SAN LUIS POTOSI
CHIÑAS TRINIDAD LUIS ALBERTO	APROBADO	BAJIO	QUERETARO
CISNEROS REYES JESUS	APROBADO	BAJIO	ZACATECAS
CISNEROS VILCHIS ALEJANDRO	APROBADO	CENTRO	TOLUCA
COB CAHUICH YASIR IVAN	SIN EVALUACIÓN	PENINSULA	MERIDA
COBOJ ALVAREZ YBO LUIS	APROBADO	PENINSULA	VILLAHERMOSA
COLIN RAMIREZ MANUEL ALEXANDER	APROBADO	CENTRO	ZUMPANGO
COLORADO ANTONIO JOAQUIN	APROBADO	GOLFO	XALAPA
CORICHI LOZANO JONATHAN	APROBADO	OCCIDENTE	GUADALAJARA
CORONEL ARAGON BRYAN GUILLERMO	APROBADO	PACIFICO	CULIACAN
CORONEL CACARI HECTOR ALEJANDRO	APROBADO	PACIFICO	SAN LUIS RIO COLORADO
CORTES ALTA DAVID	APROBADO	SURESTE	TEHUACAN
CORTEZ GARCIA CHRISTIAN ALBERTO	APROBADO	PACIFICO	HERMOSILLO
COVARRUBIAS ASTORGA JOSE LUIS	APROBADO	PACIFICO	MAZATLAN
COVARRUBIAS HERNANDEZ ANTONIO JOEL	APROBADO	NORTE	MONTERREY
CRUZ ALDAZABA CARLOS	APROBADO	GOLFO	VERACRUZ
CRUZ CRUZ ARNULFO	EXTRAORDINARIO	SURESTE	TUXTLA GUTIERREZ
CRUZ DE LA CRUZ HOMERO	APROBADO	SURESTE	TUXTLA GUTIERREZ
CRUZ MEDEL URIEL	APROBADO	SURESTE	PUEBLA
CRUZ MUNGUIA SANTOS HESBAI	APROBADO	OCCIDENTE	GUADALAJARA
CRUZ ROMAN ORLANDO	APROBADO	PACIFICO	TIJUANA
CUELLAR RODRIGUEZ JESUS	APROBADO	BAJIO	LEON
DAVILA ESPARZA OSCAR IVAN	APROBADO	BAJIO	AGUASCALIENTES
DE ANDA DELGADO JOSE LUIS	APROBADO	OCCIDENTE	TLAQUEPAQUE
DE LA CRUZ PEREZ EDGARDO	APROBADO	PENINSULA	MERIDA
DE LEON OLIVO PEDRO JESUS	APROBADO	NORTE	TORREON
DE LEON SOLIS RODRIGO	APROBADO	NORTE	SALTILLO
DEL CASTILLO RODRIGUEZ RICARDO	APROBADO	OCCIDENTE	GUADALAJARA
DEL VALLE MARTINEZ JESUS	APROBADO	PACIFICO	MAZATLAN
DELGADILLO TRUJILLO OSCAR	EXTRAORDINARIO	OCCIDENTE	GUADALAJARA
DELGADO PORTELA HECTOR LUIS	APROBADO	PACIFICO	TIJUANA
DIAZ HERRERA CESAR OCTAVIO	APROBADO	OCCIDENTE	ZAPOPAN
DIAZ PATIÑO JOSE DE JESUS	APROBADO	PACIFICO	MAZATLAN
DIAZ PELAYO JOSE IGNACIO	APROBADO	OCCIDENTE	GUADALAJARA NORTE
DIAZ RODAS VICTOR ALEXANDER	APROBADO	SURESTE	TAPACHULA
DIAZ VENOZA MARIO ROBERTO	APROBADO	SURESTE	JOJUTLA
DIMAS CHACON BRAYAN	APROBADO	MICHOACAN	MORELIA
DOMINGUEZ LOPEZ GILBERTO	SIN EVALUACIÓN	SURESTE	PUEBLA
DOMINGUEZ MENDOZA FELIPE ANTONIO	SIN EVALUACIÓN	PACIFICO	CULIACAN
DOMINGUEZ ORTIZ KEVIN JHOVANI	APROBADO	NORTE	TORREON
DOMINGUEZ RANGEL JESUS YAHIR	APROBADO	BAJIO	SAN LUIS POTOSI
DURAN AGUILAR LUIS FERNANDO	APROBADO	SURESTE	PUEBLA
DURAN HERNANDEZ JOSE ERNESTO	EXTRAORDINARIO	SURESTE	PUEBLA
ELIAS HERRERA JUAN CARLOS	APROBADO	BAJIO	ZACATECAS
REZA RAMIREZ PEDRO ANGEL ELIAS	APROBADO	OCCIDENTE	TLAJOMULCO
ESCOBEDO VELASCO NELSON ARTURO	SIN EVALUACIÓN	BAJIO	LEON
ESPARZA DENA JORGE ALEJANDRO	APROBADO	OCCIDENTE	GUADALAJARA NORTE
ESPARZA JIMENEZ JAIME	APROBADO	CENTRO	TULTITLAN
ESPINOZA GARCIA SERGIO	EXTRAORDINARIO	CENTRO	TLALNEPANTLA
ESQUER BARBA HUMBERTO	APROBADO	PACIFICO	OBREGON
ESQUIVEL CRUZ NOE	APROBADO	OCCIDENTE	TLAJOMULCO
FARFAN SALAZAR GIBRAN DE JESUS	APROBADO	OCCIDENTE	GUADALAJARA NORTE
FELIX ACEVEDO MARTIN DANIEL	APROBADO	PACIFICO	OBREGON
FELIX PORTILLO JESUS MANUEL	SIN EVALUACIÓN	PACIFICO	CULIACAN
FELIX RAMOS GUSTAVO ADOLFO	APROBADO	NORTE	TORREON
FENTANES LEYVA DIEGO ALFONSO	APROBADO	BAJIO	SAN JUAN DEL RIO
FERNANDEZ URIAS JOSE RENE	APROBADO	PACIFICO	OBREGON
FIERRO REYES RAYMUNDO	APROBADO	PACIFICO	MAZATLAN
FIGUEROA MARTINEZ JOSE LUIS	APROBADO	GOLFO	VERACRUZ
FLETES GOMEZ IVAN OSWALDO	APROBADO	OCCIDENTE	ZAPOPAN
FLORES ARISMENDI ELIAZAR OBADIAN	SIN EVALUACIÓN	CENTRO	TOLUCA
FLORES CASTAÑEDA IRVING EDUARDO	APROBADO	OCCIDENTE	TEPIC
FLORES HERNANDEZ MIGUEL ANGEL	APROBADO	OCCIDENTE	TLAQUEPAQUE
FLORES LOPEZ MAURICIO	APROBADO	CENTRO	TLALNEPANTLA
FLORES MORALES ENRIQUE	APROBADO	SURESTE	PUEBLA
FLORES ORNELAS RIGOBERTO	APROBADO	MICHOACAN	MORELIA
FLORES SIERRA URIEL ISMAEL	APROBADO	CENTRO	TEXCOCO
FLORES TOMAS ELIU	SIN EVALUACIÓN	GOLFO	POZA RICA
FLORES VAZQUEZ HECTOR	APROBADO	OCCIDENTE	GUADALAJARA
FLORES VAZQUEZ MARCO ANTONIO	APROBADO	SURESTE	PUEBLA
FRANCO ALVARADO CESAR OCTAVIO	APROBADO	OCCIDENTE	GUADALAJARA NORTE
FRANCO FLORES JORGE LUIS	REPROBADO	BAJIO	AGUASCALIENTES
FRANCO RENTERIA LUIS MANUEL	APROBADO	PACIFICO	HERMOSILLO
FUENTES MARTINEZ VICTOR ALFONSO	APROBADO	SURESTE	TEHUACAN
FUENTES SANTOYO JOSE LUIS	APROBADO	OCCIDENTE	COLIMA
GALICIA GONZALEZ ABEL OSWALDO	APROBADO	CENTRO	TOLUCA
GALLEGOS PEREZ JOSE ALFONSO	APROBADO	BAJIO	SAN LUIS POTOSI
GALVEZ MACHADO ROLANDO	APROBADO	PACIFICO	GUASAVE
GARAY HERNANDEZ JOSE ANTONIO	APROBADO	NORTE	TORREON
GARCIA ALMAZAN VICTOR HUGO	APROBADO	CENTRO	TLALNEPANTLA
GARCIA CASTRO MANUEL	APROBADO	NORTE	TORREON
GARCIA CUELLAR SAUL ALEJANDRO	APROBADO	OCCIDENTE	GUADALAJARA
GARCIA FERNANDEZ RIGOBERTO	APROBADO	GOLFO	XALAPA
GARCIA FREGOSO ENRIQUE ISRAEL	APROBADO	OCCIDENTE	GUADALAJARA
GARCIA GOMEZ JAVIER	SIN EVALUACIÓN	SURESTE	PUEBLA
GARCIA GONZALEZ EFRAIN ALEJANDRO	APROBADO	OCCIDENTE	GUADALAJARA NORTE
GARCIA HERNANDEZ LEONARDO ARMANDO	APROBADO	BAJIO	LEON
GARCIA LIMON VICTOR MANUEL	APROBADO	OCCIDENTE	TLAQUEPAQUE
GARCIA LUNA KEVYN ANTONY	APROBADO	OCCIDENTE	GUADALAJARA
GARCIA MARTINEZ ALAN JHOVANY	APROBADO	PACIFICO	MAGDALENA SN
GARCIA REYES AMERICO IGNACIO	APROBADO	BAJIO	SAN LUIS POTOSI
GARCIA RODRIGUEZ CESAR	APROBADO	CENTRO	NICOLAS ROMERO
GARCIA SANDOVAL JORGE	APROBADO	OCCIDENTE	GUADALAJARA
GARCIA TEMIX IVAN	APROBADO	CENTRO	ATLACOMULCO
GARCIA TLACOMULCO RAUL	APROBADO	SURESTE	PUEBLA
GARIBAY OCHOA JUAN ISMAEL	EXTRAORDINARIO	OCCIDENTE	GUADALAJARA NORTE
GARMENDIA DIAZ JOEL	APROBADO	SURESTE	TEHUACAN
GARRIDO GARCIA ROGELIO	APROBADO	SURESTE	TLAXCALA
GARRIDO SOLANO RAFAEL	APROBADO	GOLFO	XALAPA
GASPAR RAMIREZ CARLOS	APROBADO	PACIFICO	MAZATLAN
GAXIOLA BAEZ RICARDO IVAN	APROBADO	PACIFICO	LOS MOCHIS
GOMEZ DIAZ CRISTOPHER HUMBERTO	APROBADO	CENTRO	TOLUCA
GOMEZ FLORES OSWALDO	APROBADO	CENTRO	TEXCOCO
GOMEZ HERRERA BERNARDO	APROBADO	SURESTE	PUEBLA
GOMEZ MORENO LUIS FERNANDO	APROBADO	SURESTE	TUXTLA GUTIERREZ
GONZALEZ ACEVEDO JESUS ERNESTO	APROBADO	OCCIDENTE	ZAPOPAN
GONZALEZ  ARIEL FRANCISCO	APROBADO	NORTE	CHIHUAHUA
GONZALEZ BARCENAS GUSTAVO	APROBADO	SURESTE	TEHUACAN
GONZALEZ CASTRO LUIS ANGEL	REPROBADO	PACIFICO	MEXICALI
GONZALEZ DOMINGUEZ VICTOR MANUEL	APROBADO	PACIFICO	CULIACAN
GONZALEZ GARCIA JUAN ANTONIO	APROBADO	GOLFO	VERACRUZ
GONZALEZ GUERRA LUIS DAVID	APROBADO	BAJIO	LEON
GONZALEZ LLANAS JUAN ALEJANDRO	APROBADO	NORTE	MONTERREY
GONZALEZ MARIN MUCIO	SIN EVALUACIÓN	SURESTE	PUEBLA
GONZALEZ MONROY RAMON	APROBADO	SURESTE	PUEBLA
GONZALEZ MORA JORGE ANTONIO	EXTRAORDINARIO	OCCIDENTE	GUADALAJARA
GONZALEZ MORENO JUAN MANUEL	APROBADO	OCCIDENTE	GUADALAJARA
GONZALEZ OBESO ROBERTO	APROBADO	PACIFICO	CULIACAN
GONZALEZ OLIVEROS JOSE ANTONIO	APROBADO	MICHOACAN	MORELIA
GONZALEZ PALOS LUIS EMMANUEL	APROBADO	OCCIDENTE	TONALA JAL
GONZALEZ RODRIGUEZ ALEJANDRO	APROBADO	NORTE	SALTILLO
GUEVARA ROJAS VICTOR MANUEL	APROBADO	PACIFICO	LA PAZ
GUTIERREZ ALVAREZ ALONSO	APROBADO	OCCIDENTE	GUADALAJARA
GUTIERREZ ALVAREZ VALENTINO	APROBADO	OCCIDENTE	ZAPOPAN
EUGENIO GUTIERREZ FIDEL	APROBADO	OCCIDENTE	GUADALAJARA
GUTIERREZ MORALES SERGIO LENIN	APROBADO	CENTRO	IZTACALCO
GUTIERREZ ROJAS CARLOS	APROBADO	CENTRO	TOLUCA
GUTIERREZ ZAVALA JONNATTAN ENRIQUE	APROBADO	CENTRO	TLALNEPANTLA
GUZMAN FRANCO EDGAR	APROBADO	MICHOACAN	MORELIA
HERNANDEZ ANGELES JERUSALEN IVAHNOE	APROBADO	MICHOACAN	MORELIA
HERNANDEZ CASTILLO MOISES AUGUSTO	APROBADO	NORTE	TORREON
HERNANDEZ CHAVEZ ALEXIS JAEL	APROBADO	CENTRO	NICOLAS ROMERO
HERNANDEZ CORNEJO JULIO	APROBADO	SURESTE	TLAXCALA
HERNANDEZ CRUZ EDUARDO	SIN EVALUACIÓN	BAJIO	LEON
HERNANDEZ ESCOBAR ERICK	APROBADO	MICHOACAN	MORELIA
HERNANDEZ FERNANDEZ CARLOS	APROBADO	CENTRO	IZTACALCO
HERNANDEZ GONZALEZ GERARDO JAVIER	APROBADO	BAJIO	LEON
HERNANDEZ GUTIERREZ CARLOS IVAN	APROBADO	SURESTE	TUXTLA GUTIERREZ
HERNANDEZ JUAREZ JESUS SACRAMENTO	APROBADO	SURESTE	CUERNAVACA
HERNANDEZ MALDONADO FRANCISCO JAVIER	APROBADO	OCCIDENTE	COLIMA
HERNANDEZ PEREZ DANIEL	EXTRAORDINARIO	MICHOACAN	MORELIA
HERNANDEZ RAMOS DEMETRIO	SIN EVALUACIÓN	BAJIO	LEON
HERNANDEZ RODRIGUEZ FRANCISCO JAVIER	APROBADO	SURESTE	TLAXCALA
HERNANDEZ SANTIAGO JUAN CARLOS	SIN EVALUACIÓN	CENTRO	ATLACOMULCO
HERNANDEZ VEGA MANUEL ALEJANDRO	APROBADO	PACIFICO	OBREGON
HERRERA OLVERA JESUS ALFREDO	SIN EVALUACIÓN	NORTE	MONTERREY
HOLGUIN CORRALES JUAN RAMON	APROBADO	PACIFICO	HERMOSILLO
IBARRA RUBIO ENRIQUE	APROBADO	PACIFICO	LOS MOCHIS
INZUNZA AGUIRRE DAVID AARON	APROBADO	PACIFICO	LA PAZ
JIMENEZ CRISANTOS ALEXIS	APROBADO	CENTRO	ATLACOMULCO
JIMENEZ MARTINEZ FELIX	APROBADO	OCCIDENTE	TLAJOMULCO
JIMENEZ MARTINEZ REYMUNDO AGUSTIN	APROBADO	OCCIDENTE	GUADALAJARA NORTE
JUAREZ ARGOTE JUAN PABLO	APROBADO	BAJIO	LEON
JUAREZ BARRAZA JOSE AARON	APROBADO	PACIFICO	PUERTO PEÑASCO
JUAREZ CASTRO MISAEL	APROBADO	PACIFICO	MEXICALI
JUAREZ DE LA TORRE CRISTIAN MANUEL	APROBADO	OCCIDENTE	GUADALAJARA
JUAREZ LOPEZ FELIPE ENRIQUE	REPROBADO	BAJIO	SAN MIGUEL DE ALLENDE
JUAREZ XOCHIMITL ANDRES	APROBADO	SURESTE	PUEBLA
KU GARIBAY URIEL ARISAI	SIN EVALUACIÓN	PENINSULA	MERIDA
LAGUNA SANCHEZ MOISES	APROBADO	BAJIO	CELAYA
LARA FERNANDEZ PAULINO DAVID	APROBADO	GOLFO	XALAPA
LARA GONZALEZ PROSPERO	APROBADO	OCCIDENTE	GUADALAJARA
LARA MORALES LUIS BRANDON	APROBADO	BAJIO	LEON
LARA RIVERO JOSE JONATHAN	APROBADO	CENTRO	ZUMPANGO
LECHUGA GALINDO ANGEL EDUARDO	APROBADO	NORTE	TORREON
LEON NIETO MARIO ALBERTO	APROBADO	MICHOACAN	MORELIA
LEON RICO ALEJANDRO	APROBADO	OCCIDENTE	ZAMORA
LEYVA ARAIZA JORGE	APROBADO	SURESTE	PUEBLA
LEYVA CECEÑA FRANCISCO JASIEL	APROBADO	PACIFICO	NOGALES
LIMONES AGUILERA DANIEL ANDRES	APROBADO	NORTE	TORREON
LIRA GUZMAN BRUNO ESTEFANO	APROBADO	OCCIDENTE	TLAJOMULCO
LIRA MARTINEZ ERICK GUILLERMO	APROBADO	CENTRO	TOLUCA
LLAMAS MUÑOZ JOEL	APROBADO	OCCIDENTE	TEPIC
LOPEZ ACOSTA JOSE RENE	APROBADO	PACIFICO	NAVOJOA
LOPEZ BARRERAS MARCO ANTONIO	APROBADO	PACIFICO	OBREGON
LOPEZ COTA EDUARDO RAFAEL	APROBADO	PACIFICO	OBREGON
LOPEZ DE LA CRUZ GIOVANNI	APROBADO	BAJIO	AGUASCALIENTES
LOPEZ ENCINAS FRANCISCO JAVIER	APROBADO	PACIFICO	HERMOSILLO
LOPEZ FABIAN ANGEL JERONIMO	APROBADO	MICHOACAN	MORELIA
LOPEZ FLORES DAVID	APROBADO	CENTRO	IZTACALCO
LOPEZ GALAVIZ FRANCISCO JAIRO	APROBADO	NORTE	DURANGO
LOPEZ HERNANDEZ CARLOS AUGUSTO	APROBADO	GOLFO	VERACRUZ
LOPEZ HERNANDEZ OMAR OBED	APROBADO	PACIFICO	TIJUANA
LOPEZ OLIVA ANGEL GABRIEL	EXTRAORDINARIO	OCCIDENTE	GUADALAJARA NORTE
LOPEZ RAMIREZ JUAN JOSE	APROBADO	BAJIO	SAN MIGUEL DE ALLENDE
LOPEZ REYES IVAN DE JESUS	APROBADO	SURESTE	PUEBLA
LOPEZ RUIZ OMAR ANIBAL	APROBADO	PACIFICO	LOS MOCHIS
LOPEZ SANTOS DANIEL ROGELIO	APROBADO	OCCIDENTE	TLAJOMULCO
LOPEZ SEGURA JUAN JOSE	APROBADO	OCCIDENTE	ZAMORA
LOPEZ ZATARAIN JESUS	APROBADO	NORTE	TORREON
LORENZO MONTES CARLOS ALBERTO	APROBADO	OCCIDENTE	COLIMA
LOZANO ESPINOZA FABIAN	APROBADO	OCCIDENTE	ZAPOPAN
LUGO ALVAREZ RICARDO	APROBADO	OCCIDENTE	GUADALAJARA
MACIAS DIAZ LUIS GERARDO	APROBADO	BAJIO	LEON
MACIAS GUZMAN ARMANDO	APROBADO	OCCIDENTE	GUADALAJARA
MARIN CARMONA ERNESTO	APROBADO	CENTRO	TOLUCA
MARIN MOLINA CARLOS DANIEL	APROBADO	BAJIO	AGUASCALIENTES
MARIN ROMAN JORGE ORLANDO	SIN EVALUACIÓN	PACIFICO	CULIACAN
MARISCAL BONILLA ALEJANDRO	APROBADO	OCCIDENTE	TONALA JAL
MARISCAL CORDOVA JUAN DIEGO	APROBADO	OCCIDENTE	GUADALAJARA NORTE
MARTINEZ CRUZ JOSE MARIA	APROBADO	PACIFICO	OBREGON
MARTINEZ CRUZ PEDRO EMILIO	APROBADO	MICHOACAN	MORELIA
MARTINEZ GARCIA JUAN MANUEL	APROBADO	CENTRO	TEXCOCO
MARTINEZ GARCIA MARIANO GUADALUPE	APROBADO	OCCIDENTE	GUADALAJARA
MARTINEZ JIMENEZ DANIEL	APROBADO	SURESTE	TEHUACAN
MARTINEZ LANDEROS CESAR	APROBADO	OCCIDENTE	GUADALAJARA NORTE
MARTINEZ MACIAS ROSENDO	APROBADO	OCCIDENTE	GUADALAJARA NORTE
MARTINEZ MARTINEZ JAVIER	APROBADO	CENTRO	TLALNEPANTLA
MARTINEZ MEZA JOSE ROSARIO	APROBADO	PACIFICO	CULIACAN
MARTINEZ RAMIREZ MARCO ANTONIO	APROBADO	OCCIDENTE	GUADALAJARA
MARTINEZ ROSAS ABEL	APROBADO	OCCIDENTE	GUADALAJARA
MATA LIMON RAMON	APROBADO	OCCIDENTE	GUADALAJARA
MAURICIO QUINTANILLA VLADIMIR ALEXANDER	APROBADO	PACIFICO	GUAYMAS
MAZA AVENDAÑO JOAQUIN SALVADOR	APROBADO	SURESTE	TUXTLA GUTIERREZ
MEDINA ANDRADE LEONCIO	APROBADO	PACIFICO	CULIACAN
MEDINA QUIROZ ALAN ROBERTO	APROBADO	BAJIO	AGUASCALIENTES
MEDINA SALAZAR GILBERTO	APROBADO	BAJIO	LEON
MEDINA SARIÑANA PEDRO FABIAN	SIN EVALUACIÓN	PACIFICO	CULIACAN
MEDRANO URUETA BRAYAN ISIDRO	APROBADO	MICHOACAN	MORELIA
MELGAR RENTERAL IRVING MANUEL	APROBADO	GOLFO	VERACRUZ
MENDEZ LOPEZ RICARDO	SIN EVALUACIÓN	SURESTE	TUXTLA GUTIERREZ
MENDEZ SOLIS EDUARDO	APROBADO	BAJIO	FRESNILLO
MENDOZA AGUILAR DEYVID DANIEL	APROBADO	BAJIO	SALAMANCA
MENDOZA OLVERA JUAN DE DIOS	APROBADO	BAJIO	GUANAJUATO
MENESES MENDEZ MAURICIO	APROBADO	GOLFO	XALAPA
MEZA CUELLAR VILIULFO	APROBADO	OCCIDENTE	ZAMORA
MEZA MARQUEZ ADRIAN GUADALUPE	SIN EVALUACIÓN	BAJIO	LEON
MEZA MONTES NAIMAD ANTONIO	APROBADO	PACIFICO	LOS MOCHIS
MEZA PEREZ FRANCISCO	APROBADO	GOLFO	VERACRUZ
MICHEL SOLIS CESAR JAVIER	APROBADO	NORTE	TORREON
MIRANDA LOPEZ GEOVANNI	APROBADO	BAJIO	QUERETARO
MIRANDA JIMENEZ EDGAR	APROBADO	SURESTE	CUERNAVACA
MOLINA ALDANA HONORIO	APROBADO	OCCIDENTE	GUADALAJARA
MOLINA TRUJILLO EDUARDO	APROBADO	CENTRO	IZTACALCO
MONDRAGON FIERROS OSCAR	APROBADO	OCCIDENTE	GUADALAJARA
MONDRAGON ZARATE MANUEL	APROBADO	OCCIDENTE	GUADALAJARA
MONTELON ESPINOSA JUAN MANUEL	APROBADO	OCCIDENTE	COLIMA
MONTELONGO LINARES FABIAN HUMBERTO	EXTRAORDINARIO	BAJIO	LEON
MONTES AGUILAR PAUL NIVARDO	APROBADO	OCCIDENTE	GUADALAJARA
MONTIEL PAREDES REY GUADALUPE	APROBADO	PACIFICO	HERMOSILLO
MORA BELTRAN LUCIO	APROBADO	OCCIDENTE	TLAJOMULCO
MORA JUAREZ JOSUE	APROBADO	CENTRO	TLALNEPANTLA
MORA JUAREZ RUBEN	APROBADO	BAJIO	SALAMANCA
MORALES BENITEZ JORGE GABRIEL	APROBADO	GOLFO	VERACRUZ
MORALES BERNAL JORGE	APROBADO	BAJIO	CELAYA
MORENO CASTAÑEDA RICARDO	APROBADO	OCCIDENTE	TONALA JAL
MORALES CRUZ JOSE ALFREDO	APROBADO	CENTRO	TEXCOCO
MORALES GARZA LUIS ALFREDO	APROBADO	NORTE	MONTERREY
MORALES GONZALEZ PEDRO EDUARDO	APROBADO	NORTE	TORREON
MORALES LUNA MARIO ALAN	SIN EVALUACIÓN	BAJIO	AGUASCALIENTES
MORALES ORTIZ JORDAN DANIEL	EXTRAORDINARIO	OCCIDENTE	GUADALAJARA
MORAN MIRANDA ROBERTO	SIN EVALUACIÓN	SURESTE	TEHUANTEPEC
MORENO CASTAÑEDA RICARDO	APROBADO	OCCIDENTE	TONALA JAL
MORENO FIGUEROA LIONCIO	APROBADO	SURESTE	JOJUTLA
MORENO HERNANDEZ SALVADOR	SIN EVALUACIÓN	PACIFICO	CULIACAN
MORENO LEON OSCAR	APROBADO	NORTE	CD JUAREZ
MORENO RAMOS JUAN EDUARDO	APROBADO	SURESTE	PUEBLA
MORENO SAUCEDO JOSE ANDRES	APROBADO	BAJIO	LEON
MORQUECHO CALATA CARLOS IGNACIO	APROBADO	OCCIDENTE	GUADALAJARA
MULIA PALOMINO ADEMIR	APROBADO	CENTRO	TOLUCA
MUÑIZ LARA JUAN MANUEL	APROBADO	BAJIO	SAN LUIS POTOSI
MUÑIZ LOPEZ CATARINO	APROBADO	NORTE	DURANGO
MUÑOS GUERRA MARCOS	APROBADO	BAJIO	CELAYA
MUÑOZ FLORES JUAN CARLOS	APROBADO	OCCIDENTE	ZAMORA
NAJERA ESPINOSA LUIS ANTONIO	APROBADO	SURESTE	TUXTLA GUTIERREZ
NANGO SANCHEZ VICTOR MANUEL	APROBADO	SURESTE	TUXTLA GUTIERREZ
NIETO RAMIREZ ANDRES	APROBADO	BAJIO	SAN JUAN DEL RIO
NUÑEZ ROJO HECTOR RAMON	APROBADO	PACIFICO	CULIACAN
NUÑEZ SALINAS JORGE ALBERTO	APROBADO	PACIFICO	AGUA PRIETA
OCAMPO MEDELLIN GUSTAVO ALONSO	APROBADO	OCCIDENTE	TEPIC
OCOTITLA HERRERA FRANCISCO DANIEL	APROBADO	SURESTE	PUEBLA
OJEDA LOPEZ JOSE LUIS	APROBADO	GOLFO	MARTINEZ DE LA TORRE
OLEA HERNANDEZ JUAN CARLOS	APROBADO	SURESTE	ACAPULCO
OLMOS CONTRERAS MARIO	APROBADO	CENTRO	ATLACOMULCO
OLVERA IZAGUIRRE MARCO ANTONIO	APROBADO	BAJIO	LEON
OREA ROJAS URBANO	APROBADO	SURESTE	PUEBLA
OROPEZA NAVARRO RIGOBERTO	SIN EVALUACIÓN	CENTRO	TLALNEPANTLA
ORTEGA RAUDIA MANUEL ADRIAN	SIN EVALUACIÓN	BAJIO	LEON
ORTIZ ANDRADE ROGELIO ISMAEL	APROBADO	PACIFICO	TECATE
OSUNA ORTIZ CESAR MARTIN	APROBADO	PACIFICO	MAZATLAN
OZUNA CHOCOTECO VIDAL ANTONIO	APROBADO	OCCIDENTE	TEPIC
PADILLA GOMEZ JULIO CESAR	APROBADO	MICHOACAN	MORELIA
PALAFOX HERNANDEZ ROGELIO ENRIQUE	APROBADO	BAJIO	GUANAJUATO
PALOMINO CHONG ERIK SALVADOR	APROBADO	NORTE	TORREON
PARRA DIAZ LUIS SERGIO	APROBADO	PACIFICO	NOGALES
PAYAN GONZALEZ JESUS OCTAVIO	APROBADO	PACIFICO	MAZATLAN
PEÑA CALVARIO ANGEL	APROBADO	SURESTE	PUEBLA
PEÑA SALAZAR LUIS ANTONIO	SIN EVALUACIÓN	CENTRO	TOLUCA
PERAZA MENDOZA CARLOS ALBERTO	APROBADO	PACIFICO	HERMOSILLO
PERALTA SANCHEZ ABRAHAM	APROBADO	SURESTE	PUEBLA
PEREZ GARCIA MARCO ANTONIO	APROBADO	SURESTE	PUEBLA
PEREZ GONZALEZ AGUSTIN	APROBADO	SURESTE	TUXTLA GUTIERREZ
PEREZ LIZAMA JACOB ISAAC	APROBADO	BAJIO	QUERETARO
PEREZ PALOMINO EFREN ADRIAN	EXTRAORDINARIO	BAJIO	IRAPUATO
PEREZ PLATA MAURICIO	APROBADO	CENTRO	ZUMPANGO
PEREZ RAMIREZ MIGUEL ANGEL	APROBADO	PACIFICO	TIJUANA
PEREZ ZENTENO RICARDO	APROBADO	PENINSULA	VILLAHERMOSA
PINEDA ESCOBAR MARCO ANTONIO EMMANUEL	APROBADO	CENTRO	TOLUCA
PINEDA OLIVA ENRIQUE ALEXANDER	EXTRAORDINARIO	SURESTE	ACAPULCO
PIÑA GODINEZ GIOVANNI DAVID	APROBADO	BAJIO	LEON
PUGA REYES IRAK OMAR	SIN EVALUACIÓN	PENINSULA	CANCUN
PULIDO FLORES JUAN	APROBADO	SURESTE	PUEBLA
QUEVEDO CASTILLO JUAN CARLOS	APROBADO	PACIFICO	TIJUANA
QUINTANA ARAGON MANUEL DE JESUS	APROBADO	PACIFICO	AGUA PRIETA
QUITL BARRAGAN MIGUEL ANGEL	APROBADO	GOLFO	POZA RICA
RAMIREZ DIAZ ARMANDO	APROBADO	BAJIO	SALAMANCA
RAMIREZ LUNA AURELIO	REPROBADO	OCCIDENTE	TLAJOMULCO
RAMIREZ MENDEZ ERIK JASSIEL	APROBADO	SURESTE	PUEBLA
RAMIREZ MONTES JOSE MIGUEL	APROBADO	PACIFICO	MEXICALI
RAMIREZ MURILLO ANGEL	APROBADO	SURESTE	PUEBLA
RAMIREZ RODRIGUEZ FRANCISCO JAVIER	APROBADO	MICHOACAN	MORELIA
RAMIREZ SANTIAGO JOSE LUIS	APROBADO	SURESTE	OAXACA
RAMIREZ SILVA JOSE ALFONSO	APROBADO	NORTE	TORREON
RAMOS CRUZ JUAN ALBERTO	APROBADO	SURESTE	TAPACHULA
RAMOS MUÑOZ EUFEMIO	APROBADO	OCCIDENTE	GUADALAJARA
RAMOS POLANCO FRANCISCO JAVIER	APROBADO	OCCIDENTE	TEPIC
RANGEL MEDINA FRANCISCO EMMANUEL	SIN EVALUACIÓN	BAJIO	SAN LUIS POTOSI
RAVELO CONTRERAS JOSUE ISRAEL	APROBADO	NORTE	DURANGO
RENDON PEÑATE LUIS ANTONIO	APROBADO	PENINSULA	PALENQUE
REYES CHAIREZ CESAR OMAR	APROBADO	NORTE	DURANGO
REYES GONZALEZ LUIS ALFREDO	APROBADO	GOLFO	XALAPA
REYES MEZA HUMBERTO	APROBADO	SURESTE	PUEBLA
REYES SALAZAR HUGO CESAR	APROBADO	OCCIDENTE	GUADALAJARA
RIBOTA AMAYA SAMUEL	APROBADO	NORTE	CD JUAREZ
RIOS VARGAS JUAN CARLOS	APROBADO	BAJIO	LEON
RIVAS CHAVARRIA EDGAR ISRAEL	EXTRAORDINARIO	CENTRO	TEXCOCO
RIVAS GIRON ALFREDO	APROBADO	PACIFICO	CABO SAN LUCAS
RIVERA ANDRADE JOSE ALVARO	APROBADO	MICHOACAN	MORELIA
RIVERA CAMPAS HECTOR DANIEL	APROBADO	PACIFICO	HERMOSILLO
RIVERA CORONA JESUS RICARDO	SIN EVALUACIÓN	SURESTE	PUEBLA
RIVERA HERNANDEZ CRHISTIAN	APROBADO	SURESTE	PUEBLA
RIVERA MENDOZA MIGUEL ANGEL	APROBADO	GOLFO	VERACRUZ
ROCHA ESPARZA OMAR JORGE	APROBADO	BAJIO	LEON
ROCHA MARTINEZ CARLOS	APROBADO	BAJIO	SAN LUIS POTOSI
RODRIGUEZ ALVAREZ EDUARDO	APROBADO	CENTRO	TOLUCA
RODRIGUEZ CHAVEZ MARIO ARTURO	APROBADO	PACIFICO	MAZATLAN
RODRIGUEZ CRUZ ALAN CANDELARIO	APROBADO	PACIFICO	HERMOSILLO
RODRIGUEZ FLORES LUIS	APROBADO	PACIFICO	LA PAZ
RODRIGUEZ FRAGOZO JUAN FRANCISCO	SIN EVALUACIÓN	PACIFICO	CULIACAN
RODRIGUEZ GARCIA JOSE ISRAEL	EXTRAORDINARIO	SURESTE	PUEBLA
RODRIGUEZ HERNANDEZ JUAN DIEGO	APROBADO	OCCIDENTE	GUADALAJARA NORTE
RODRIGUEZ HERNANDEZ RIGOBERTO	APROBADO	OCCIDENTE	GUADALAJARA NORTE
RODRIGUEZ JUAREZ RUBEN OMAR	APROBADO	GOLFO	POZA RICA
RODRIGUEZ VALENZUELA ABRAHAM ANDORENY	SIN EVALUACIÓN	PACIFICO	CD CONSTITUCION
RODRIGUEZ VALLEJO VICTOR HUGO	APROBADO	MICHOACAN	MORELIA
RODRIGUEZ ZUÑIGA MERARI ABISAI	APROBADO	OCCIDENTE	GUADALAJARA
ROJAS ALVARADO JOSE RAMON	SIN EVALUACIÓN	PACIFICO	MAZATLAN
ROJAS LOPEZ ANGEL AUGUSTO	APROBADO	SURESTE	PUEBLA
ROMAN GARCIA JULIO	APROBADO	SURESTE	PUEBLA
ROMERO FLORES LUIS ABRAHAM	APROBADO	NORTE	DURANGO
ROMERO HARO DAVID	APROBADO	OCCIDENTE	GUADALAJARA NORTE
ROMERO RAMIREZ MIGUEL	APROBADO	CENTRO	TOLUCA
ROMERO SOLANO DANIEL	APROBADO	SURESTE	PUEBLA
ROMERO VALENZUELA JOSE ABDIEL	APROBADO	PACIFICO	OBREGON
ROMERO VERDUGO EMMANUEL	APROBADO	PACIFICO	CULIACAN
ROSALES LEYVA ADRIAN	APROBADO	PACIFICO	CABO SAN LUCAS
ROSALES MARTINEZ RAFAEL ANTONIO	APROBADO	PACIFICO	OBREGON
ROSALES RAMIREZ SERGIO ALFONSO	APROBADO	BAJIO	SAN MIGUEL DE ALLENDE
RUBIO CRUZ RAFAEL ANTONIO	APROBADO	PACIFICO	MAZATLAN
RUIZ BRAVO VICTOR	APROBADO	SURESTE	SAN MARTIN TEXMELUCAN
RUIZ SANCHEZ EDUARDO	APROBADO	CENTRO	IZTACALCO
RUIZ ZARATE HERIBERTO	APROBADO	NORTE	DURANGO
RUVALCABA VAZQUEZ LUIS FREDDY	APROBADO	OCCIDENTE	TLAJOMULCO
SAAVEDRA GRIJALVA LUIS GILBERTO	APROBADO	PACIFICO	HERMOSILLO
SAAVEDRA MORENO EDGAR MANUEL	SIN EVALUACIÓN	SURESTE	OAXACA
SALAS CASTAÑEDA ABRAHAM	APROBADO	PACIFICO	LOS MOCHIS
SALAS GUARNEROS CARLOS IVAN	APROBADO	SURESTE	PUEBLA
SALAZAR COLIN RAMON MAURICIO	APROBADO	OCCIDENTE	GUADALAJARA
SALCEDO GUERRERO ALEXIS	APROBADO	GOLFO	XALAPA
SALGADO SANCHEZ ALAN JOSUE	APROBADO	OCCIDENTE	GUADALAJARA
SAMANIEGO GONZALEZ LUIS ALBERTO	APROBADO	PACIFICO	CULIACAN
SANCHEZ BORBON JESUS MANUEL	APROBADO	PACIFICO	NAVOJOA
SANCHEZ HERAS SERGIO	APROBADO	PACIFICO	CULIACAN
SANCHEZ LOPEZ RAUL	SIN EVALUACIÓN	NORTE	SANTA CATARINA
SANCHEZ LUMBRERAS GALDINO	APROBADO	NORTE	SANTA CATARINA
SANCHEZ PONCE LUIS LORENZO	APROBADO	PACIFICO	LOS MOCHIS
SANCHEZ RIVERA JOSE ANDRES	APROBADO	NORTE	TORREON
SANCHEZ VELASQUEZ JOSE PRESILIANO	APROBADO	CENTRO	TOLUCA
SANTIAGO ARGUETA OSWALDO	SIN EVALUACIÓN	SURESTE	PUEBLA
SANTIAGO JIMENEZ DARIO	SIN EVALUACIÓN	BAJIO	QUERETARO
SANTILLAN CARVAJAL DANIEL	APROBADO	OCCIDENTE	TEPIC
ARAGON AGUILAR ARMANDO SANTOS	EXTRAORDINARIO	OCCIDENTE	GUADALAJARA
SANTOS DOMINGUEZ BRUNO ANTONIO	APROBADO	NORTE	CHIHUAHUA
SEGURA ROSALES JOSE MANUEL	APROBADO	BAJIO	LEON
SERNAS MARTINEZ OSCAR	APROBADO	SURESTE	PUEBLA
SERRANO ROSAS OSCAR JAVIER	APROBADO	OCCIDENTE	GUADALAJARA
SILVESTRE CAMPOSECO JOSE IGNACIO	APROBADO	NORTE	MONTERREY
SOLIS MORENO ANTONIO	APROBADO	GOLFO	CORDOBA
SOTELO VILLAGRANA JOSE RICARDO	APROBADO	PACIFICO	HERMOSILLO
SOTO HERNANDEZ SAUL DEL ROSARIO	EXTRAORDINARIO	GOLFO	VERACRUZ
SPINOSO ROBLES RAFAEL	APROBADO	NORTE	CD JUAREZ
TAMAYO TREJO GERARDO	APROBADO	BAJIO	QUERETARO
TENAHUA ROMERO FELIPE	APROBADO	SURESTE	PUEBLA
TINOCO RIOS JOSE ARTURO	APROBADO	NORTE	DURANGO
TLAHUIZO ROMERO JONATHAN ISRAEL	APROBADO	PACIFICO	LOS MOCHIS
TLACHINO SEVERIAN LUIS ANGEL	APROBADO	SURESTE	PUEBLA
TORBELLIN VIVEROS IRVING IGNACIO	APROBADO	GOLFO	XALAPA
TORRES CORONA MAURICIO	APROBADO	SURESTE	PUEBLA
TORRES DEL REAL JESUS ENRIQUE	APROBADO	NORTE	DURANGO
TORRES ESQUIVEL MIGUEL ANGEL	APROBADO	OCCIDENTE	GUADALAJARA
TORRES FRANCO PEDRO SANTIAGO	APROBADO	PACIFICO	HERMOSILLO
TORRES ORNELAS JOSE RAMON	APROBADO	OCCIDENTE	TLAJOMULCO
TORRES PORTILLO EDGAR ARTURO	APROBADO	BAJIO	SAN LUIS POTOSI
TORRES RABIA JORGE ADRIAN	APROBADO	BAJIO	IRAPUATO
TORRES RODRIGUEZ LUIS ALBERTO	APROBADO	OCCIDENTE	COLIMA
TOVAR HERNANDEZ LUIS ANTONIO	APROBADO	BAJIO	SAN MIGUEL DE ALLENDE
TRUJILLO TOLEDO GEOVANY	APROBADO	CENTRO	TEXCOCO
URIBE ENRIQUEZ LUIS ALEJANDRO	APROBADO	PACIFICO	LOS MOCHIS
USCANGA ARAUJO UBALDO DE JESUS EPIFANIO	APROBADO	GOLFO	VERACRUZ
VALDEZ DIAZ JAIRO JESUS	APROBADO	PACIFICO	GUASAVE
VALDEZ GONZALEZ GERARDO JAVIER	APROBADO	PACIFICO	TIJUANA
VALDEZ LARIOS JOAQUIN	APROBADO	SURESTE	PUEBLA
VALENCIA TECUA JOSE ARMANDO	SIN EVALUACIÓN	SURESTE	PUEBLA
VALENZUELA VELAZQUEZ MARIO ALBERTO	APROBADO	PACIFICO	MEXICALI
VALERDI ROSALES ALEJANDRO	APROBADO	SURESTE	PUEBLA
VALLE RODRIGUEZ JOCSAN	APROBADO	OCCIDENTE	TLAQUEPAQUE
VALLEJO SALAS JULIO ALBERTO	APROBADO	CENTRO	TOLUCA
VARELA HERNANDEZ JUAN CARLOS	APROBADO	OCCIDENTE	TEPIC
VARELA PONCE CHRISTIAN EMMANUEL	APROBADO	CENTRO	IZTACALCO
VARGAS REYES RAUL	APROBADO	SURESTE	PUEBLA
VARGAS VAZQUEZ JOSE ROBERTO	APROBADO	GOLFO	CORDOBA
VASQUEZ ARELLANO EDISSON MOISES	APROBADO	PACIFICO	MEXICALI
VASQUEZ CASTILLO JOEL ENRIQUE	APROBADO	GOLFO	XALAPA
VAZQUEZ BELTRAN MANUEL JESUS	APROBADO	PENINSULA	CHAMPOTON
VAZQUEZ DE JESUS JULIAN	APROBADO	GOLFO	POZA RICA
VAZQUEZ HERRERA OSIEL ANTONIO	APROBADO	NORTE	DURANGO
VAZQUEZ MEDINA OSVALDO ALEJANDRO	APROBADO	OCCIDENTE	GUADALAJARA NORTE
VAZQUEZ OJEDA FERNANDO ENRIQUE	APROBADO	BAJIO	AGUASCALIENTES
VAZQUEZ PEREZ LUIS FERNANDO	APROBADO	SURESTE	TUXTLA GUTIERREZ
VAZQUEZ SANCHEZ RICARDO	APROBADO	BAJIO	CELAYA
VEGA GONZALEZ RAUL	APROBADO	BAJIO	QUERETARO
VELAZQUEZ CHAVEZ SERGIO ANTONIO	APROBADO	NORTE	CHIHUAHUA
VELAZQUEZ TIZOC JESUS HERIBERTO	APROBADO	PACIFICO	CULIACAN
VENEGAS FLORES EDGAR ANDRES	APROBADO	OCCIDENTE	TEPIC
VENEGAS GONZALEZ FRANCISCO DANIEL	APROBADO	OCCIDENTE	GUADALAJARA
VENTURA SANTIAGO ELIEZER	APROBADO	BAJIO	SAN LUIS POTOSI
VERA CORNEJO JUAN ANTONIO	APROBADO	OCCIDENTE	TONALA JAL
VILLAGRANA AVILA RODOLFO	APROBADO	NORTE	TORREON
VILLALOBOS ALCALA ANGEL RICARDO	APROBADO	OCCIDENTE	GUADALAJARA
VILLALOBOS HERNANDEZ ANGEL ERNESTO	APROBADO	OCCIDENTE	GUADALAJARA NORTE
VILLARREAL IMPERIAL JOSUE YOSIMAR	APROBADO	PACIFICO	CULIACAN
VIRGEN ESCALANTE BRYAN ULISES	APROBADO	PACIFICO	GUAYMAS
VIRGEN VARGAS FRANCISCO JAVIER	APROBADO	OCCIDENTE	TLAJOMULCO
VIRGEN VETERANO SERGIO SANTIAGO	APROBADO	OCCIDENTE	GUADALAJARA
YA CAAMAL FRANCISCO ALFONSO	SIN EVALUACIÓN	PENINSULA	CANCUN
YOUNG CANIZALES RAMON ALBERTO	APROBADO	PACIFICO	HUATABAMPO
ZAMUDIO ZIZUMBO RUBEN	APROBADO	MICHOACAN	MORELIA`;

        // --- Variables Globales ---
        let globalProcessedRegionData = [];
        let globalProcessedSucursalData = [];
        let regionBarChartInstance = null;
        let paretoRegionChartInstance = null; // <-- Añadido
        let paretoSucursalChartInstance = null; 
        let kpiDoughnutChartInstance = null; 
        let globalKPIs = {}; 
        let currentRegionFilter = null;
        const estatusEvaluado = ["APROBADO", "REPROBADO", "EXTRAORDINARIO"];

        // --- Función Principal de Procesamiento ---
        function procesarDatos() {
            const filas = rawData.split('\n').slice(1); // Omitir encabezado
            const statsByRegion = {};
            const statsBySucursal = {};

            filas.forEach(fila => {
                const columnas = fila.split('\t');
                if (columnas.length < 4) return; // Omitir filas incompletas

                const evaluacion = columnas[1].trim();
                const sucursal = columnas[2].trim(); 
                const region = columnas[3].trim(); 

                // --- Lógica de descarte de ND ---
                // Si la región es #N/D o está vacía, ignorar esta fila por completo
                if (region === '#N/D' || region === '') {
                    return; 
                }

                // --- Procesar por Región ---
                if (!statsByRegion[region]) {
                    statsByRegion[region] = {
                        total: 0,
                        APROBADO: 0,
                        REPROBADO: 0,
                        EXTRAORDINARIO: 0,
                        SIN_EVALUACION: 0
                    };
                }
                
                // --- LÓGICA CORREGIDA (de nuevo) ---
                // Contar solo categorías válidas
                if (evaluacion === 'APROBADO') {
                    statsByRegion[region].APROBADO++;
                    statsByRegion[region].total++; 
                } else if (evaluacion === 'REPROBADO') {
                    statsByRegion[region].REPROBADO++;
                    statsByRegion[region].total++; 
                } else if (evaluacion === 'EXTRAORDINARIO') {
                    statsByRegion[region].EXTRAORDINARIO++;
                    statsByRegion[region].total++; 
                } else if (evaluacion === 'SIN EVALUACIÓN') {
                    statsByRegion[region].SIN_EVALUACION++;
                    statsByRegion[region].total++; 
                }
                // Las filas con evaluacion '#N/D' u otra cosa ahora se ignoran del total
                
                // --- Procesar por Sucursal ---
                // (Ya sabemos que la región es válida, así que la sucursal también lo será)
                if (!statsBySucursal[sucursal]) {
                    statsBySucursal[sucursal] = {
                        total: 0,
                        evaluados: 0,
                        sin_evaluacion: 0, 
                        region: region 
                    };
                }
                
                if (estatusEvaluado.includes(evaluacion)) {
                    statsBySucursal[sucursal].evaluados++;
                    statsBySucursal[sucursal].total++; 
                } else if (evaluacion === 'SIN EVALUACIÓN') { 
                    statsBySucursal[sucursal].sin_evaluacion++;
                    statsBySucursal[sucursal].total++; 
                }
            });

            // --- Procesamiento de Regiones ---
            globalProcessedRegionData = Object.keys(statsByRegion).map(region => {
                const data = statsByRegion[region];
                const evaluados = data.APROBADO + data.REPROBADO + data.EXTRAORDINARIO;
                const porcentaje = (data.total > 0) ? (evaluados / data.total) * 100 : 0;

                return {
                    region,
                    total: data.total,
                    evaluados,
                    porcentaje,
                    aprobado: data.APROBADO,
                    reprobado: data.REPROBADO,
                    extraordinario: data.EXTRAORDINARIO,
                    sin_evaluacion: data.SIN_EVALUACION
                };
            });

            // Ordenar por porcentaje descendente
            globalProcessedRegionData.sort((a, b) => b.porcentaje - a.porcentaje);

            // --- Rellenar KPIs ---
            const totalGeneral = globalProcessedRegionData.reduce((acc, curr) => acc + curr.total, 0);
            const totalEvaluadosGeneral = globalProcessedRegionData.reduce((acc, curr) => acc + curr.evaluados, 0);
            const totalPendientesGeneral = globalProcessedRegionData.reduce((acc, curr) => acc + curr.sin_evaluacion, 0);
            const porcentajeGeneral = (totalGeneral > 0) ? (totalEvaluadosGeneral / totalGeneral) * 100 : 0;
            
            // Guardar KPIs globales
            globalKPIs = {
                total: totalGeneral,
                evaluados: totalEvaluadosGeneral,
                sin_evaluacion: totalPendientesGeneral,
                porcentaje: porcentajeGeneral
            };

            // Renderizar KPIs iniciales
            updateKPIs(globalKPIs);

            // --- Rellenar Tabla de Desglose Región ---
            const tablaDesgloseBody = document.getElementById('tabla-desglose-body');
            tablaDesgloseBody.innerHTML = ''; // Limpiar "cargando"

            globalProcessedRegionData.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'border-b border-slate-100 hover:bg-gray-100';
                row.innerHTML = `
                    <td class="p-2 text-sm font-medium text-slate-900">${item.region}</td>
                    <td class="p-2 text-sm text-slate-700 text-center">${item.aprobado}</td>
                    <td class="p-2 text-sm text-slate-700 text-center">${item.reprobado}</td>
                    <td class="p-2 text-sm text-slate-700 text-center">${item.extraordinario}</td>
                    <td class="p-2 text-sm text-slate-700 text-center">${item.sin_evaluacion}</td>
                `;
                tablaDesgloseBody.appendChild(row);
            });
            // --- Procesar datos de Sucursal ---
            globalProcessedSucursalData = Object.keys(statsBySucursal).map(sucursal => {
                const data = statsBySucursal[sucursal];
                const porcentaje = (data.total > 0) ? (data.evaluados / data.total) * 100 : 0;
                return {
                    sucursal,
                    region: data.region, // <-- Guardar la región
                    total: data.total,
                    evaluados: data.evaluados,
                    sin_evaluacion: data.sin_evaluacion, 
                    porcentaje
                };
            });

            // NOTA: La ordenación por % se hace dentro de renderTablaSucursal

            // --- Renderizar Tabla de Sucursal (Llamada inicial) ---
            renderTablaSucursal(currentRegionFilter);

            // --- Renderizar Gráficos Pareto ---
            renderParetoRegion(globalProcessedRegionData, globalKPIs.sin_evaluacion);
            // La llamada inicial para el pareto de sucursal
            renderParetoSucursal(globalProcessedSucursalData, globalKPIs.sin_evaluacion, null); // null = global


            // --- Generar Gráfico KPI (Dona) ---
            renderDoughnutChart(globalKPIs.porcentaje);

            // --- Generar Gráfico de Barras (Región) ---
            const ctxBar = document.getElementById('regionBarChart').getContext('2d');
            const labels = globalProcessedRegionData.map(item => item.region);
            const data = globalProcessedRegionData.map(item => item.porcentaje);
            const regionBGColors = globalProcessedRegionData.map(item => getColor(item.region)); // <-- Colores dinámicos

            if (regionBarChartInstance) {
                regionBarChartInstance.destroy();
            }
            
            regionBarChartInstance = new Chart(ctxBar, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '% Avance',
                        data: data,
                        backgroundColor: regionBGColors, // <-- ACTUALIZADO
                        borderRadius: 6,
                        barPercentage: 0.6,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    // --- MANEJADOR DE CLIC ---
                    onClick: (event, elements) => {
                        let newFilter = null;
                        let regionStats = null; // Para guardar los stats de la región
                        
                        if (elements.length > 0) {
                            const i = elements[0].index;
                            // Asegurarse de que el índice está dentro de los límites
                            if (i < globalProcessedRegionData.length) {
                                const region = globalProcessedRegionData[i].region;
                                // Alternar filtro: si se hace clic en la misma barra, se desactiva
                                if (currentRegionFilter !== region) {
                                    newFilter = region;
                                    // Encontrar los stats para esta región
                                    regionStats = globalProcessedRegionData.find(r => r.region === newFilter);
                                }
                            }
                        }
                        
                        // Actualizar el filtro global
                        currentRegionFilter = newFilter;
                        
                        // 1. Volver a renderizar la tabla de sucursales
                        renderTablaSucursal(currentRegionFilter);
                        
                        // 2. Actualizar los colores del gráfico de barras
                        const bgColors = globalProcessedRegionData.map(item => 
                            (currentRegionFilter === null || currentRegionFilter === item.region) 
                            ? getColor(item.region) // <-- ACTUALIZADO
                            : '#d1d5db' // Color inactivo (gray-300)
                        );
                        
                        if (regionBarChartInstance) {
                            regionBarChartInstance.data.datasets[0].backgroundColor = bgColors;
                            regionBarChartInstance.update();
                        }

                        // --- NUEVAS ACCIONES ---

                        // 3. Actualizar KPIs y Gráfico de Dona
                        if (currentRegionFilter && regionStats) {
                            updateKPIs(regionStats);
                            renderDoughnutChart(regionStats.porcentaje);
                        } else {
                            updateKPIs(globalKPIs); // Volver a globales
                            renderDoughnutChart(globalKPIs.porcentaje);
                        }
                        
                        // 4. Actualizar Pareto de Sucursal
                        let sucursalDataForPareto = globalProcessedSucursalData;
                        let totalPendientesForPareto = globalKPIs.sin_evaluacion;
                        
                        if (currentRegionFilter && regionStats) {
                            // Filtrar sucursales por la región seleccionada
                            sucursalDataForPareto = globalProcessedSucursalData.filter(s => s.region === currentRegionFilter);
                            totalPendientesForPareto = regionStats.sin_evaluacion;
                        }
                        
                        renderParetoSucursal(sucursalDataForPareto, totalPendientesForPareto, currentRegionFilter);
                    },
                    // --- FIN DE MANEJADOR DE CLIC ---
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Avance: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: '#e5e7eb' // gray-200
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // --- Nueva Función: Renderizar Tabla de Sucursal ---
        function renderTablaSucursal(filterRegion = null) {
            const tablaSucursalBody = document.getElementById('tabla-sucursal-body');
            const titleEl = document.getElementById('sucursal-title');
            tablaSucursalBody.innerHTML = ''; // Limpiar

            let dataToRender = globalProcessedSucursalData;

            // Aplicar filtro si existe
            if (filterRegion) {
                dataToRender = globalProcessedSucursalData.filter(item => item.region === filterRegion);
                titleEl.innerText = `Avance por Sucursal (Región: ${filterRegion})`;
            } else {
                titleEl.innerText = 'Avance por Sucursal';
            }

            // Ordenar por porcentaje descendente DESPUÉS de filtrar
            dataToRender.sort((a, b) => b.porcentaje - a.porcentaje);

            if (dataToRender.length === 0) {
                tablaSucursalBody.innerHTML = '<tr><td colspan="3" class="text-center p-6 text-slate-500">No hay sucursales para esta región.</td></tr>';
                return;
            }

            dataToRender.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'border-b border-slate-100 hover:bg-gray-100';
                
                const sucursalCell = `<td class="p-3 text-sm font-medium text-slate-900">${item.sucursal}</td>`;
                
                const avanceCell = `
                    <td class="p-3">
                        <div class="flex items-center space-x-2">
                            <div class="w-full bg-slate-200 rounded-full h-2.5">
                                <div class="h-2.5 rounded-full" style="width: ${item.porcentaje.toFixed(1)}%; background-color: ${getColor(item.region)}"></div>
                            </div>
                            <span class="text-sm font-medium text-slate-600 w-12 text-right">${item.porcentaje.toFixed(1)}%</span>
                        </div>
                    </td>
                `;
                
                const fraccionCell = `<td class="p-3 text-sm text-slate-600 font-medium text-right">${item.evaluados} / ${item.total}</td>`;

                row.innerHTML = sucursalCell + avanceCell + fraccionCell;
                tablaSucursalBody.appendChild(row);
            });
        }

        // --- Nuevas Funciones de Pareto ---

        // Nueva: Actualizar KPIs dinámicamente
        function updateKPIs(data) {
            const porcentaje = data.porcentaje || 0;
            document.getElementById('kpi-total-tecnicos').innerText = data.total;
            document.getElementById('kpi-total-evaluados').innerText = data.evaluados;
            document.getElementById('kpi-total-pendientes').innerText = data.sin_evaluacion;
            document.getElementById('kpi-porcentaje-general-text').innerText = `${porcentaje.toFixed(1)}%`;
            
            // Actualizar también el texto del gráfico de dona
            document.getElementById('kpi-porcentaje-general').innerText = `${porcentaje.toFixed(1)}%`;
            document.getElementById('kpi-fraccion-general').innerText = `${data.evaluados} / ${data.total}`;
        }

        // Nueva: Renderizar Gráfico de Dona dinámicamente
        function renderDoughnutChart(porcentaje) {
            if (kpiDoughnutChartInstance) {
                kpiDoughnutChartInstance.destroy();
            }
            const ctxDoughnut = document.getElementById('kpi-chart-general').getContext('2d');
            kpiDoughnutChartInstance = new Chart(ctxDoughnut, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [porcentaje, 100 - porcentaje],
                        backgroundColor: [
                            '#3b82f6', // blue-500
                            '#e5e7eb'  // gray-200
                        ],
                        borderWidth: 0,
                        borderRadius: 8,
                    }]
                },
                options: {
                    cutout: '80%',
                    responsive: true,
                    plugins: {
                        tooltip: { enabled: false }
                    },
                    events: []
                }
            });
        }

        function renderParetoRegion(regionData, totalPendientes) {
            if (paretoRegionChartInstance) {
                paretoRegionChartInstance.destroy();
            }
            
            const ctx = document.getElementById('paretoRegionChart').getContext('2d');
            
            // Sort by pendientes descending
            const sortedData = [...regionData].filter(d => d.sin_evaluacion > 0).sort((a, b) => b.sin_evaluacion - a.sin_evaluacion);
            
            if (sortedData.length === 0) {
                 // Ocultar o limpiar el gráfico si no hay pendientes
                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                ctx.font = "16px Inter";
                ctx.fillStyle = "#64748b"; // slate-500
                ctx.textAlign = "center";
                ctx.fillText("¡No hay técnicos pendientes!", ctx.canvas.width / 2, ctx.canvas.height / 2);
                return; // No dibujar nada más
            }

            const labels = sortedData.map(d => d.region);
            const pendingCounts = sortedData.map(d => d.sin_evaluacion);
            const colors = sortedData.map(d => getColor(d.region));

            let cumulative = 0;
            const cumulativePct = sortedData.map(d => {
                cumulative += d.sin_evaluacion;
                return (totalPendientes > 0) ? (cumulative / totalPendientes) * 100 : 0;
            });
            
            paretoRegionChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Técnicos Pendientes',
                            data: pendingCounts,
                            backgroundColor: colors,
                            borderRadius: 6,
                            barPercentage: 0.6,
                            yAxisID: 'y-bar',
                        },
                        {
                            label: '% Acumulado (Pareto)',
                            data: cumulativePct,
                            type: 'line',
                            borderColor: '#ef4444', // red-500
                            backgroundColor: '#ef4444',
                            borderWidth: 2,
                            pointRadius: 3,
                            yAxisID: 'y-line',
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: true, position: 'bottom' } },
                    scales: {
                        y: { display: false }, // Ocultar eje Y principal
                        'y-bar': {
                            type: 'linear',
                            position: 'left',
                            beginAtZero: true,
                            title: { display: true, text: 'N° de Pendientes' },
                            grid: { display: false }
                        },
                        'y-line': {
                            type: 'linear',
                            position: 'right',
                            min: 0,
                            max: 100,
                            title: { display: true, text: '% Acumulado' },
                            ticks: { callback: value => value.toFixed(0) + '%' }
                        },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        function renderParetoSucursal(sucursalData, totalPendientes, regionFilter = null) {
            if (paretoSucursalChartInstance) {
                paretoSucursalChartInstance.destroy(); // Destruir el gráfico anterior
            }
            const ctx = document.getElementById('paretoSucursalChart').getContext('2d');
            const titleEl = document.getElementById('pareto-sucursal-title');
            const descEl = document.getElementById('pareto-sucursal-desc');
            
            if (totalPendientes === 0) {
                let msg = "¡No hay técnicos pendientes!";
                if(regionFilter) {
                    titleEl.innerText = `Pareto de Pendientes (Sucursales de ${regionFilter})`;
                    descEl.innerText = `No hay técnicos pendientes en esta región.`;
                    msg = "No hay técnicos pendientes en esta región.";
                } else {
                    titleEl.innerText = 'Pareto de Pendientes (Global)';
                    descEl.innerText = 'No hay técnicos pendientes en ninguna sucursal.';
                }
                
                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                 ctx.font = "16px Inter";
                ctx.fillStyle = "#64748b"; // slate-500
                ctx.textAlign = "center";
                ctx.fillText(msg, ctx.canvas.width / 2, ctx.canvas.height / 2);
                return; 
            }
            
            // Sort by pendientes descending
            let sortedData = [...sucursalData].sort((a, b) => b.sin_evaluacion - a.sin_evaluacion);
            
            let dataForChart;
            if (regionFilter) {
                // Si hay un filtro de región, mostrar todas sus sucursales (ya está filtrada la data)
                dataForChart = sortedData.filter(d => d.sin_evaluacion > 0); // Solo mostrar las que tienen pendientes
                titleEl.innerText = `Pareto de Pendientes (Sucursales de ${regionFilter})`;
                descEl.innerText = `Sucursales de ${regionFilter} ordenadas por técnicos pendientes.`;
            } else {
                // Vista global: Limitar al Top 20
                dataForChart = sortedData.filter(d => d.sin_evaluacion > 0).slice(0, 20);
                titleEl.innerText = 'Pareto de Pendientes (Top 20 Sucursales)';
                descEl.innerText = 'Las 20 sucursales (global) con más técnicos pendientes.';
            }

            // Si después de filtrar (especialmente para región) no hay data, mostrar mensaje
            if (dataForChart.length === 0) {
                 titleEl.innerText = `Pareto de Pendientes (Sucursales de ${regionFilter})`;
                 descEl.innerText = 'No hay técnicos pendientes en esta región.';
                 ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                 ctx.font = "16px Inter";
                 ctx.fillStyle = "#64748b"; // slate-500
                 ctx.textAlign = "center";
                 ctx.fillText("No hay técnicos pendientes en esta región.", ctx.canvas.width / 2, ctx.canvas.height / 2);
                 return;
            }

            const labels = dataForChart.map(d => d.sucursal);
            const pendingCounts = dataForChart.map(d => d.sin_evaluacion);
            const colors = dataForChart.map(d => getColor(d.region));

            let cumulative = 0;
            // OJO: El total para el % acumulado debe ser el total del subconjunto (o el global)
            // 'totalPendientes' ya es el total correcto (sea global o de la región)
            const cumulativePct = dataForChart.map(d => {
                cumulative += d.sin_evaluacion;
                const pct = (totalPendientes > 0) ? (cumulative / totalPendientes) * 100 : 0;
                return pct;
            });

            paretoSucursalChartInstance = new Chart(ctx, { // Asignar a la variable global
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Técnicos Pendientes',
                            data: pendingCounts,
                            backgroundColor: colors,
                            borderRadius: 6,
                            barPercentage: 0.6,
                            yAxisID: 'y-bar',
                        },
                        {
                            label: '% Acumulado (Pareto)',
                            data: cumulativePct,
                            type: 'line',
                            borderColor: '#ef4444', // red-500
                            backgroundColor: '#ef4444',
                            borderWidth: 2,
                            pointRadius: 3,
                            yAxisID: 'y-line',
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: true, position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                footer: function(tooltipItems) {
                                    // Añadir la región al tooltip
                                    const index = tooltipItems[0].dataIndex;
                                    const region = dataForChart[index].region; // Usar dataForChart
                                    return `Región: ${region}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: { display: false },
                        'y-bar': {
                            type: 'linear',
                            position: 'left',
                            beginAtZero: true,
                            title: { display: true, text: 'N° de Pendientes' },
                            grid: { display: false }
                        },
                        'y-line': {
                            type: 'linear',
                            position: 'right',
                            min: 0,
                            max: 100,
                            title: { display: true, text: '% Acumulado' },
                            ticks: { callback: value => value.toFixed(0) + '%' }
                        },
                        x: { 
                            grid: { display: false },
                            ticks: {
                                autoSkip: false, // Mostrar todas las etiquetas
                                maxRotation: 90, // Rotar etiquetas
                                minRotation: 45
                            }
                        }
                    }
                }
            });
        }

        // Ejecutar el procesamiento cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', procesarDatos);
    </script>
</body>
</html>








































