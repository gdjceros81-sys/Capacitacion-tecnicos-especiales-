<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Avance</title>
    <!-- Carga de Tailwind CSS para estilos -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carga de Chart.js para gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Fuente Inter */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Zebra striping para tablas */
        #tabla-desglose-body tr:nth-child(even),
        #tabla-sucursal-body tr:nth-child(even) {
            background-color: #f9fafb; /* gray-50 */
        }
    </style>
</head>
<body class="bg-gray-50 text-slate-800">

    <!-- Encabezado Oscuro -->
    <header class="bg-slate-800 shadow-md">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
            <div class="flex justify-between items-center h-16">
                <h1 class="text-xl md:text-2xl font-bold text-white">Avance capacitación técnicos especiales (Instalación redes mesh)</h1>
                <span class="text-sm font-medium text-slate-300 hidden sm:block">Resumen Ejecutivo</span>
            </div>
        </div>
    </header>

    <!-- Contenido Principal -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl py-8">
        
        <!-- Sección de KPIs Principales con Iconos -->
        <section id="kpis" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            
            <!-- Card: Total Técnicos -->
            <div class="bg-white p-6 rounded-xl shadow-md flex items-center space-x-4">
                <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                    <!-- Icono SVG (Users) -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                </div>
                <div>
                    <div class="text-sm font-medium text-slate-500">Técnicos (Total)</div>
                    <div id="kpi-total-tecnicos" class="text-3xl font-bold text-slate-900 mt-1">...</div>
                </div>
            </div>

            <!-- Card: Total Evaluados -->
            <div class="bg-white p-6 rounded-xl shadow-md flex items-center space-x-4">
                <div class="p-3 rounded-full bg-green-100 text-green-600">
                    <!-- Icono SVG (User Check) -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div>
                    <div class="text-sm font-medium text-slate-500">Técnicos Evaluados</div>
                    <div id="kpi-total-evaluados" class="text-3xl font-bold text-slate-900 mt-1">...</div>
                </div>
            </div>

            <!-- Card: Total Pendientes -->
            <div class="bg-white p-6 rounded-xl shadow-md flex items-center space-x-4">
                <div class="p-3 rounded-full bg-amber-100 text-amber-600">
                    <!-- Icono SVG (User Clock) -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div>
                    <div class="text-sm font-medium text-slate-500">Técnicos Pendientes</div>
                    <div id="kpi-total-pendientes" class="text-3xl font-bold text-slate-900 mt-1">...</div>
                </div>
            </div>

            <!-- Card: Avance General -->
            <div class="bg-white p-6 rounded-xl shadow-md flex items-center space-x-4">
                <div class="p-3 rounded-full bg-indigo-100 text-indigo-600">
                    <!-- Icono SVG (Percentage) - CORREGIDO -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 14.25l6-6m-4-3.5a2.25 2.25 0 114.5 0 2.25 2.25 0 01-4.5 0zM17.25 17.25a2.25 2.25 0 110-4.5 2.25 2.25 0 010 4.5z" />
                    </svg>
                </div>
                <div>
                    <div class="text-sm font-medium text-slate-500">Avance General</div>
                    <div id="kpi-porcentaje-general-text" class="text-3xl font-bold text-slate-900 mt-1">...</div>
                </div>
            </div>
        </section>

        <!-- Sección de Gráficos Principales -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-8">
            
            <!-- Columna Principal: Nuevo Gráfico de Barras -->
            <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-xl font-semibold mb-4 text-slate-800">Avance por Región</h2>
                <div class="relative h-[400px]">
                    <canvas id="regionBarChart"></canvas>
                </div>
            </div>
            
            <!-- Columna Lateral: Gráfico de Dona General -->
            <div class="bg-white p-6 rounded-xl shadow-md flex flex-col items-center">
                <h2 class="text-xl font-semibold text-slate-800">Avance General</h2>
                <div id="kpi-chart-general-wrapper" class="relative w-full max-w-[280px] mt-4">
                     <canvas id="kpi-chart-general"></canvas>
                     <div id="kpi-porcentaje-general" class="absolute inset-0 flex items-center justify-center text-5xl font-bold text-slate-800">
                         ...
                     </div>
                </div>
                <div id="kpi-fraccion-general-wrapper" class="text-2xl font-semibold text-slate-600 mt-6">
                    <span id="kpi-fraccion-general">...</span>
                </div>
                <span class="text-sm font-medium text-slate-500">Evaluados / Total</span>
            </div>
        </section>


        <!-- Sección de Tablas de Desglose -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-6 mt-8">
            
            <!-- Tabla de Sucursales (más grande) -->
            <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-md">
                <h2 id="sucursal-title" class="text-xl font-semibold mb-4">Avance por Sucursal</h2>
                <div class="overflow-x-auto max-h-[600px] overflow-y-auto">
                    <table class="w-full min-w-[600px]">
                        <thead class="border-b border-slate-200 sticky top-0 bg-white">
                            <tr>
                                <th class="text-left text-sm font-semibold text-gray-600 p-3">Sucursal</th>
                                <th class="text-left text-sm font-semibold text-gray-600 p-3">Avance</th>
                                <th class="text-right text-sm font-semibold text-gray-600 p-3">Evaluados / Total</th>
                            </tr>
                        </thead>
                        <tbody id="tabla-sucursal-body">
                            <tr><td colspan="3" class="text-center p-6 text-slate-500">Cargando datos...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Tabla de Desglose (más pequeña) -->
            <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-xl font-semibold mb-4">Desglose por Región</h2>
                <div class="overflow-x-auto max-h-[600px] overflow-y-auto">
                    <table class="w-full min-w-[300px]">
                        <thead class="border-b border-slate-200 sticky top-0 bg-white">
                            <tr>
                                <th class="text-left text-sm font-semibold text-gray-600 p-2">Región</th>
                                <th class="text-center text-sm font-semibold text-green-600 p-2" title="Aprobado">Apr</th>
                                <th class="text-center text-sm font-semibold text-red-600 p-2" title="Reprobado">Rep</th>
                                <th class="text-center text-sm font-semibold text-blue-600 p-2" title="Extraordinario">Ext</th>
                                <th class="text-center text-sm font-semibold text-amber-600 p-2" title="Sin Evaluación">Pen</th>
                            </tr>
                        </thead>
                        <tbody id="tabla-desglose-body">
                            <tr><td colspan="5" class="text-center p-6 text-slate-500">Cargando datos...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </section>

        <!-- Nueva Sección de Análisis Pareto -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8">
            
            <!-- Pareto Región -->
            <div class="bg-white p-6 rounded-xl shadow-md">
                <h2 class="text-xl font-semibold mb-4 text-slate-800">Pareto de Pendientes (Región)</h2>
                <p class="text-sm text-slate-500 mb-4">Regiones ordenadas por el mayor número de técnicos pendientes.</p>
                <div class="relative h-[400px]">
                    <canvas id="paretoRegionChart"></canvas>
                </div>
            </div>
            
            <!-- Pareto Sucursal -->
            <div class="bg-white p-6 rounded-xl shadow-md">
                <h2 id="pareto-sucursal-title" class="text-xl font-semibold mb-4 text-slate-800">Pareto de Pendientes (Top 20 Sucursales)</h2>
                <p id="pareto-sucursal-desc" class="text-sm text-slate-500 mb-4">Las 20 sucursales con más técnicos pendientes.</p>
                <div class="relative h-[400px]">
                    <canvas id="paretoSucursalChart"></canvas>
                </div>
            </div>

        </section>

    </main>

    <script>
        // Paleta de colores para las 9 regiones
        const REGION_COLORS = {
            'BAJIO': '#3b82f6',     // blue-500
            'CENTRO': '#10b981',    // emerald-500
            'GOLFO': '#ef4444',     // red-500
            'MICHOACAN': '#f59e0b', // amber-500
            'NORTE': '#6366f1',     // indigo-500
            'OCCIDENTE': '#84cc16', // lime-500
            'PACIFICO': '#0ea5e9',  // sky-500
            'PENINSULA': '#d946ef', // fuchsia-500
            'SURESTE': '#f97316',   // orange-500
            '(Sin Región)': '#6b7280', // gray-500 - Corregido
            'default': '#6b7280'    // gray-500
        };

        // Función para obtener color
        function getColor(region) {
            return REGION_COLORS[region] || REGION_COLORS['default'];
        }

        // Los datos crudos proporcionados por el usuario
        // CORRECCIÓN: "GUADALAJAFRA" -> "GUADALAJARA" en la línea de VENEGAS GONZALEZ
        const rawData = `Técnicos Especiales	Evaluación	Sucursal	Region	Puesto
ABAD DAVILA EFREN ARTURO	SIN EVALUACIÓN	HUEHUETOCA	CENTRO
AGATON FERNANDEZ EDGAR	APROBADO	XALAPA	GOLFO
AGUILA ZAMORA JOSE ALFREDO	APROBADO	PUEBLA	SURESTE
AGUILAR ALONSO CRISTIAN	APROBADO	LEON	BAJIO
AGUILAR BAUTISTA BRAYAN ALFONSO	SIN EVALUACIÓN	SANTA CATARINA	NORTE
AGUILAR DE LA PORTILLA JOSE ALBERTO	APROBADO	TOLUCA	CENTRO
AGUILAR GRACIANO ALEXIS OBED	APROBADO	LOS MOCHIS	PACIFICO
AGUILERA SOLIS JUAN CARLOS	APROBADO	MEXICALI	PACIFICO
ALATORRE MARIN JOEL	APROBADO	VERACRUZ	GOLFO
ALATORRE VAZQUEZ JOSE LUIS	APROBADO	GUADALAJARA	OCCIDENTE
ALCALA TORRES FERNANDO FERMIN	SIN EVALUACIÓN	LEON	BAJIO
ALCANTAR RAMIREZ JUAN CARLOS	APROBADO	HERMOSILLO	PACIFICO
ALCARAZ CALDERA JUAN MANUEL	APROBADO	TLAJOMULCO	OCCIDENTE
ALMAZAN GOMEZ ALEXIS	APROBADO	TOLUCA	CENTRO
ALMEDA GONZALEZ JOSE SANTOS	APROBADO	CD JUAREZ	NORTE
ALVARADO FELIX OMAR ANDRES	APROBADO	MEXICALI	PACIFICO
ALVAREZ DIAZ EDUARDO	APROBADO	TLAJOMULCO	OCCIDENTE
ALVAREZ RUIZ ALDO	APROBADO	ZAMORA	OCCIDENTE
ANAYA RIVERA DIEGO ARMANDO	APROBADO	LEON	BAJIO
ANDRADE ALVAREZ FERNANDO HUGO	SIN EVALUACIÓN	LEON	BAJIO
ANDRADE FLORES JORGE ALBERTO	APROBADO	ZAPOPAN	OCCIDENTE
ANDRADE MARQUEZ CHRISTIAN LEONARDO	APROBADO	GUADALAJARA NORTE	OCCIDENTE
ANGEL RODRIGUEZ ALONSO BONFILIO	APROBADO	TUXTLA GUTIERREZ	SURESTE
ANGELES RIVERA ARTURO JAVIER	APROBADO	GUADALAJARA	OCCIDENTE
ANGUIANO FUENTES GERARDO	APROBADO	GUADALAJARA	OCCIDENTE
APODACA SOTO SERGIO JESUS	APROBADO	CULIACAN	PACIFICO
ARANA AGUILAR JESUS ARNOLDO	APROBADO	CULIACAN	PACIFICO
ARAUJO GARCIA ROGELIO	APROBADO	VERACRUZ	GOLFO
ARAUJO SILVAS ABDIEL OMAR	APROBADO	GUASAVE	PACIFICO
ARCE BERNAL FAUSTO ABRAHAM	APROBADO	MEXICALI	PACIFICO
ARECHIGA TORRES CARLOS ALBERTO	APROBADO	CULIACAN	PACIFICO
ARENAS AGUAYO LUIS GERARDO	APROBADO	LEON	BAJIO
ARENAS ALBA JUAN LUIS	APROBADO	LEON	BAJIO
AREVALO RIVERA EMMANUEL ALEJANDRO	APROBADO	LEON	BAJIO
ARIAS CASTILLO ULISES	APROBADO	MORELIA	MICHOACAN
ARREDONDO ARAGON FERNANDO GUADALUPE	APROBADO	TIJUANA	PACIFICO
ARREDONDO AVALOS URIEL	EXTRAORDINARIO	SAN LUIS POTOSI	BAJIO
ARROYO SUAREZ JOSE BENITO	APROBADO	GUADALAJARA	OCCIDENTE
ATTWELL CASTRO GABRIEL	APROBADO	HERMOSILLO	PACIFICO
AVALOS BAUTISTA ISAAC VLADIMIR	APROBADO	ZAMORA	OCCIDENTE
AVALOS MEDINA JUAN	APROBADO	LEON	BAJIO
AVELAR GARCIA JOSE ARTURO	SIN EVALUACIÓN	MAZATLAN	PACIFICO
AVELAR TORRES RAFAEL	APROBADO	GUADALAJARA	OCCIDENTE
AVILA MUÑOZ WILEBALDO	REPROBADO	TLALNEPANTLA	CENTRO
AVILA QUINTERO GUILLERMO BALTAZAR	APROBADO	CULIACAN	PACIFICO
AVILES HERNANDEZ GERARDO	APROBADO	TLAQUEPAQUE	OCCIDENTE
BADILLO FRANCO LEONARDO	APROBADO	PUEBLA	SURESTE
BALBUENA NUÑEZ CANDIDO	APROBADO	ACAPULCO	SURESTE
BARBA ENRIQUEZ MANUEL DE JESUS	APROBADO	HERMOSILLO	PACIFICO
BARRAGAN REYES GIOVANNI	APROBADO	TORREON	NORTE
BARRERA CASTRO CARLOS ANDRES	APROBADO	ZUMPANGO	CENTRO
BARRERAS VALDEZ JOSUE	APROBADO	OBREGON	PACIFICO
BASTIDAS CHAIDEZ OSVALDO GUADALUPE	APROBADO	CULIACAN	PACIFICO
BATALLA DIAZ CARLOS JESUS	APROBADO	ACAPULCO	SURESTE
BAUTISTA DELGADO ISMAEL ANDRES	APROBADO	MONTERREY	NORTE
BEAUREGARD MOSQUEDA JOSE VIJAY	APROBADO	VERACRUZ	GOLFO
BEDOLLA DIAZ IAN EDUARDO	APROBADO	CUERNAVACA	SURESTE
BELTRAN DELGADO JONATHAN EFRAIN	APROBADO	CULIACAN	PACIFICO
BELTRAN SANCHEZ JUAN MANUEL	APROBADO	CULIACAN	PACIFICO
BELTRAN SARABIA OMAR	APROBADO	CULIACAN	PACIFICO
BELTRANI OLMEDO ERICK PAVEL	SIN EVALUACIÓN	PAPANTLA	GOLFO
BENITEZ ARJONA RICARDO	APROBADO	TEPIC	OCCIDENTE
BERNAL MELCHOR JORGE ALBERTO	APROBADO	CULIACAN	PACIFICO
BIBIANO MARTINEZ FRANCISCO LEONEL	APROBADO	TUXTLA GUTIERREZ	SURESTE
BOJORQUEZ MURILLO IVAN RAMIRO	SIN EVALUACIÓN	CULIACAN	PACIFICO
BORREGO MACEDO HUGO ANTONIO	APROBADO	TEPIC	OCCIDENTE
BUENROSTRO BARRAGAN JUAN ENRIQUE	APROBADO	COLIMA	OCCIDENTE
BURGUEÑO LIZARRAGA RAFAEL	APROBADO	MAZATLAN	PACIFICO
CABANILLAS BAÑUELOS MARTIN EDUARDO	APROBADO	GUAMUCHIL	PACIFICO
CABELLO GONZALEZ JUAN ANTONIO	SIN EVALUACIÓN	LEON	BAJIO
CALLEROS VAZQUEZ ZAYETH	APROBADO	DURANGO	NORTE
CAMACHO BASURTO JOSE SARE	APROBADO	TEXCOCO	CENTRO
CAMARENA AGUIÑAGA EDGAR EMMANUEL	SIN EVALUACIÓN	LEON	BAJIO
CAMARGO RABAGO MARCOS	EXTRAORDINARIO	LOS MOCHIS	PACIFICO
CAMPOS SILVA GONZALO MANUEL	APROBADO	TLAQUEPAQUE	OCCIDENTE
CARDENAS MORA TOMAS ADRIAN	APROBADO	GUADALAJARA NORTE	OCCIDENTE
CARDOSO PEREZ ISRAEL	APROBADO	ZUMPANGO	CENTRO
CARREON ASCENCION DIEGO ALEJANDRO	APROBADO	MORELIA	MICHOACAN
CARREON SANCHEZ JUAN DANIEL	APROBADO	PUEBLA	SURESTE
CARRERA BELLO FERNANDO BRAYAN	APROBADO	IZTACALCO	CENTRO
CARRILLO CEBALLOS AARON ALEXIS	APROBADO	COLIMA	OCCIDENTE
CARRILLO GONZALEZ DAVID	APROBADO	AGUASCALIENTES	BAJIO
CASTAÑON PALOMARES OSNAR RICARDO	APROBADO	DURANGO	NORTE
CASTILLO ALAMILLA RICARDO ULISES	APROBADO	LEON	BAJIO
CASTILLO LOPEZ JUAN FRANCISCO	APROBADO	CULIACAN	PACIFICO
CASTILLO MONTES MAURICIO	APROBADO	COLIMA	OCCIDENTE
CASTILLO SALAS RAMON	APROBADO	AGUASCALIENTES	BAJIO
CASTRO CORDOVA JONATHAN ESTEBAN	APROBADO	DURANGO	NORTE
CAUDILLO GARCIA JORGE BENJAMIN	APROBADO	LA PAZ	PACIFICO
CERPA LOPEZ ROBERTO CARLOS	APROBADO	GUADALAJARA	OCCIDENTE
CERVANTES ARELLANO ALFONSO	APROBADO	GUADALAJARA	OCCIDENTE
CERVANTES RAMIREZ JOSE ALEJANDRO	APROBADO	LEON	BAJIO
CHALE MALDONADO JESUS OMAR	SIN EVALUACIÓN	MERIDA	PENINSULA
CHAVEZ AVILA ARTURO	APROBADO	MORELIA	MICHOACAN
CHAVEZ CASTAÑEDA VICTOR ALFONSO	APROBADO	OBREGON	PACIFICO
CHAVEZ QUIROZ GUSTAVO	APROBADO	SAN LUIS POTOSI	BAJIO
CHIÑAS TRINIDAD LUIS ALBERTO	APROBADO	QUERETARO	BAJIO
CISNEROS REYES JESUS	APROBADO	ZACATECAS	BAJIO
CISNEROS VILCHIS ALEJANDRO	APROBADO	TOLUCA	CENTRO
COB CAHUICH YASIR IVAN	SIN EVALUACIÓN	MERIDA	PENINSULA
COBOJ ALVAREZ YBO LUIS	APROBADO	VILLAHERMOSA	PENINSULA
COLIN RAMIREZ MANUEL ALEXANDER	APROBADO	ZUMPANGO	CENTRO
COLORADO ANTONIO JOAQUIN	APROBADO	XALAPA	GOLFO
CORICHI LOZANO JONATHAN	APROBADO	GUADALAJARA	OCCIDENTE
CORONEL ARAGON BRYAN GUILLERMO	APROBADO	CULIACAN	PACIFICO
CORONEL CACARI HECTOR ALEJANDRO	APROBADO	SAN LUIS RIO COLORADO	PACIFICO
CORTES ALTA DAVID	APROBADO	TEHUACAN	SURESTE
CORTEZ GARCIA CHRISTIAN ALBERTO	APROBADO	HERMOSILLO	PACIFICO
COVARRUBIAS ASTORGA JOSE LUIS	APROBADO	MAZATLAN	PACIFICO
COVARRUBIAS HERNANDEZ ANTONIO JOEL	APROBADO	MONTERREY	NORTE
CRUZ ALDAZABA CARLOS	APROBADO	VERACRUZ	GOLFO
CRUZ CRUZ ARNULFO	EXTRAORDINARIO	TUXTLA GUTIERREZ	SURESTE
CRUZ DE LA CRUZ HOMERO	APROBADO	TUXTLA GUTIERREZ	SURESTE
CRUZ MEDEL URIEL	APROBADO	PUEBLA	SURESTE
CRUZ MUNGUIA SANTOS HESBAI	APROBADO	GUADALAJARA	OCCIDENTE
CRUZ ROMAN ORLANDO	APROBADO	TIJUANA	PACIFICO
CUELLAR RODRIGUEZ JESUS	APROBADO	LEON	BAJIO
DAVILA ESPARZA OSCAR IVAN	APROBADO	AGUASCALIENTES	BAJIO
DE ANDA DELGADO JOSE LUIS	APROBADO	TLAQUEPAQUE	OCCIDENTE
DE LA CRUZ PEREZ EDGARDO	APROBADO	MERIDA	PENINSULA
DE LEON OLIVO PEDRO JESUS	APROBADO	TORREON	NORTE
DE LEON SOLIS RODRIGO	APROBADO	SALTILLO	NORTE
DEL CASTILLO RODRIGUEZ RICARDO	APROBADO	GUADALAJARA	OCCIDENTE
DEL VALLE MARTINEZ JESUS	APROBADO	MAZATLAN	PACIFICO
DELGADILLO TRUJILLO OSCAR	EXTRAORDINARIO	GUADALAJARA	OCCIDENTE
DELGADO PORTELA HECTOR LUIS	APROBADO	TIJUANA	PACIFICO
DIAZ HERRERA CESAR OCTAVIO	APROBADO	ZAPOPAN	OCCIDENTE
DIAZ PATIÑO JOSE DE JESUS	APROBADO	MAZATLAN	PACIFICO
DIAZ PELAYO JOSE IGNACIO	APROBADO	GUADALAJARA NORTE	OCCIDENTE
DIAZ RODAS VICTOR ALEXANDER	APROBADO	TAPACHULA	SURESTE
DIAZ VENOZA MARIO ROBERTO	APROBADO	JOJUTLA	SURESTE
DIMAS CHACON BRAYAN	APROBADO	MORELIA	MICHOACAN
DOMINGUEZ LOPEZ GILBERTO	SIN EVALUACIÓN	PUEBLA	SURESTE
DOMINGUEZ MENDOZA FELIPE ANTONIO	SIN EVALUACIÓN	CULIACAN	PACIFICO
DOMINGUEZ ORTIZ KEVIN JHOVANI	APROBADO	TORREON	NORTE
DOMINGUEZ RANGEL JESUS YAHIR	APROBADO	SAN LUIS POTOSI	BAJIO
DURAN AGUILAR LUIS FERNANDO	APROBADO	PUEBLA	SURESTE
DURAN HERNANDEZ JOSE ERNESTO	EXTRAORDINARIO	PUEBLA	SURESTE
ELIAS HERRERA JUAN CARLOS	APROBADO	ZACATECAS	BAJIO
REZA RAMIREZ PEDRO ANGEL ELIAS	APROBADO	TLAJOMULCO	OCCIDENTE
ESCOBEDO VELASCO NELSON ARTURO	SIN EVALUACIÓN	LEON	BAJIO
ESPARZA DENA JORGE ALEJANDRO	APROBADO	GUADALAJARA NORTE	OCCIDENTE
ESPARZA JIMENEZ JAIME	APROBADO	TULTITLAN	CENTRO
ESPINOZA GARCIA SERGIO	EXTRAORDINARIO	TLALNEPANTLA	CENTRO
ESQUER BARBA HUMBERTO	APROBADO	OBREGON	PACIFICO
ESQUIVEL CRUZ NOE	APROBADO	TLAJOMULCO	OCCIDENTE
FARFAN SALAZAR GIBRAN DE JESUS	APROBADO	GUADALAJARA NORTE	OCCIDENTE
FELIX ACEVEDO MARTIN DANIEL	APROBADO	OBREGON	PACIFICO
FELIX PORTILLO JESUS MANUEL	SIN EVALUACIÓN	CULIACAN	PACIFICO
FELIX RAMOS GUSTAVO ADOLFO	APROBADO	TORREON	NORTE
FENTANES LEYVA DIEGO ALFONSO	APROBADO	SAN JUAN DEL RIO	BAJIO
FERNANDEZ URIAS JOSE RENE	APROBADO	OBREGON	PACIFICO
FIERRO REYES RAYMUNDO	APROBADO	MAZATLAN	PACIFICO
FIGUEROA MARTINEZ JOSE LUIS	APROBADO	VERACRUZ	GOLFO
FLETES GOMEZ IVAN OSWALDO	APROBADO	ZAPOPAN	OCCIDENTE
FLORES ARISMENDI ELIAZAR OBADIAN	SIN EVALUACIÓN	TOLUCA	CENTRO
FLORES CASTAÑEDA IRVING EDUARDO	APROBADO	TEPIC	OCCIDENTE
FLORES HERNANDEZ MIGUEL ANGEL	APROBADO	TLAQUEPAQUE	OCCIDENTE
FLORES LOPEZ MAURICIO	APROBADO	TLALNEPANTLA	CENTRO
FLORES MORALES ENRIQUE	APROBADO	PUEBLA	SURESTE
FLORES ORNELAS RIGOBERTO	APROBADO	MORELIA	MICHOACAN
FLORES SIERRA URIEL ISMAEL	APROBADO	TEXCOCO	CENTRO
FLORES TOMAS ELIU	SIN EVALUACIÓN	POZA RICA	GOLFO
FLORES VAZQUEZ HECTOR	APROBADO	GUADALAJARA	OCCIDENTE
FLORES VAZQUEZ MARCO ANTONIO	APROBADO	PUEBLA	SURESTE
FRANCO ALVARADO CESAR OCTAVIO	APROBADO	GUADALAJARA NORTE	OCCIDENTE
FRANCO FLORES JORGE LUIS	REPROBADO	AGUASCALIENTES	BAJIO
FRANCO RENTERIA LUIS MANUEL	APROBADO	HERMOSILLO	PACIFICO
FUENTES MARTINEZ VICTOR ALFONSO	APROBADO	TEHUACAN	SURESTE
FUENTES SANTOYO JOSE LUIS	APROBADO	COLIMA	OCCIDENTE
GALICIA GONZALEZ ABEL OSWALDO	APROBADO	TOLUCA	CENTRO
GALLEGOS PEREZ JOSE ALFONSO	APROBADO	SAN LUIS POTOSI	BAJIO
GALVEZ MACHADO ROLANDO	APROBADO	GUASAVE	PACIFICO
GARAY HERNANDEZ JOSE ANTONIO	APROBADO	TORREON	NORTE
GARCIA ALMAZAN VICTOR HUGO	APROBADO	TLALNEPANTLA	CENTRO
GARCIA CASTRO MANUEL	APROBADO	TORREON	NORTE
GARCIA CUELLAR SAUL ALEJANDRO	APROBADO	GUADALAJARA	OCCIDENTE
GARCIA FERNANDEZ RIGOBERTO	APROBADO	XALAPA	GOLFO
GARCIA FREGOSO ENRIQUE ISRAEL	APROBADO	GUADALAJARA	OCCIDENTE
GARCIA GOMEZ JAVIER	SIN EVALUACIÓN	PUEBLA	SURESTE
GARCIA GONZALEZ EFRAIN ALEJANDRO	APROBADO	GUADALAJARA NORTE	OCCIDENTE
GARCIA HERNANDEZ LEONARDO ARMANDO	APROBADO	LEON	BAJIO
GARCIA LIMON VICTOR MANUEL	APROBADO	TLAQUEPAQUE	OCCIDENTE
GARCIA LUNA KEVYN ANTONY	APROBADO	GUADALAJARA	OCCIDENTE
GARCIA MARTINEZ ALAN JHOVANY	APROBADO	MAGDALENA SN	PACIFICO
GARCIA REYES AMERICO IGNACIO	APROBADO	SAN LUIS POTOSI	BAJIO
GARCIA RODRIGUEZ CESAR	APROBADO	NICOLAS ROMERO	CENTRO
GARCIA SANDOVAL JORGE	APROBADO	GUADALAJARA	OCCIDENTE
GARCIA TEMIX IVAN	APROBADO	ATLACOMULCO	CENTRO
GARCIA TLACOMULCO RAUL	APROBADO	PUEBLA	SURESTE
GARIBAY OCHOA JUAN ISMAEL	EXTRAORDINARIO	GUADALAJARA NORTE	OCCIDENTE
GARMENDIA DIAZ JOEL	APROBADO	TEHUACAN	SURESTE
GARRIDO GARCIA ROGELIO	APROBADO	TLAXCALA	SURESTE
GARRIDO SOLANO RAFAEL	APROBADO	XALAPA	GOLFO
GASPAR RAMIREZ CARLOS	APROBADO	MAZATLAN	PACIFICO
GAXIOLA BAEZ RICARDO IVAN	APROBADO	LOS MOCHIS	PACIFICO
GOMEZ DIAZ CRISTOPHER HUMBERTO	APROBADO	TOLUCA	CENTRO
GOMEZ FLORES OSWALDO	APROBADO	TEXCOCO	CENTRO
GOMEZ HERRERA BERNARDO	APROBADO	PUEBLA	SURESTE
GOMEZ MORENO LUIS FERNANDO	APROBADO	TUXTLA GUTIERREZ	SURESTE
GONZALEZ ACEVEDO JESUS ERNESTO	APROBADO	ZAPOPAN	OCCIDENTE
GONZALEZ  ARIEL FRANCISCO	APROBADO	CHIHUAHUA	NORTE
GONZALEZ BARCENAS GUSTAVO	APROBADO	TEHUACAN	SURESTE
GONZALEZ CASTRO LUIS ANGEL	REPROBADO	MEXICALI	PACIFICO
GONZALEZ DOMINGUEZ VICTOR MANUEL	APROBADO	CULIACAN	PACIFICO
GONZALEZ GARCIA JUAN ANTONIO	APROBADO	VERACRUZ	GOLFO
GONZALEZ GUERRA LUIS DAVID	APROBADO	LEON	BAJIO
GONZALEZ LLANAS JUAN ALEJANDRO	APROBADO	MONTERREY	NORTE
GONZALEZ MARIN MUCIO	SIN EVALUACIÓN	PUEBLA	SURESTE
GONZALEZ MONROY RAMON	APROBADO	PUEBLA	SURESTE
GONZALEZ MORA JORGE ANTONIO	EXTRAORDINARIO	GUADALAJARA	OCCIDENTE
GONZALEZ MORENO JUAN MANUEL	APROBADO	GUADALAJARA	OCCIDENTE
GONZALEZ OBESO ROBERTO	APROBADO	CULIACAN	PACIFICO
GONZALEZ OLIVEROS JOSE ANTONIO	APROBADO	MORELIA	MICHOACAN
GONZALEZ PALOS LUIS EMMANUEL	APROBADO	TONALA JAL	OCCIDENTE
GONZALEZ RODRIGUEZ ALEJANDRO	APROBADO	SALTILLO	NORTE
GUEVARA ROJAS VICTOR MANUEL	APROBADO	LA PAZ	PACIFICO
GUTIERREZ ALVAREZ ALONSO	APROBADO	GUADALAJARA	OCCIDENTE
GUTIERREZ ALVAREZ VALENTINO	APROBADO	ZAPOPAN	OCCIDENTE
EUGENIO GUTIERREZ FIDEL	APROBADO	GUADALAJARA	OCCIDENTE
GUTIERREZ MORALES SERGIO LENIN	APROBADO	IZTACALCO	CENTRO
GUTIERREZ ROJAS CARLOS	APROBADO	TOLUCA	CENTRO
GUTIERREZ ZAVALA JONNATTAN ENRIQUE	APROBADO	TLALNEPANTLA	CENTRO
GUZMAN FRANCO EDGAR	APROBADO	MORELIA	MICHOACAN
HERNANDEZ ANGELES JERUSALEN IVAHNOE	APROBADO	MORELIA	MICHOACAN
HERNANDEZ CASTILLO MOISES AUGUSTO	APROBADO	TORREON	NORTE
HERNANDEZ CHAVEZ ALEXIS JAEL	APROBADO	NICOLAS ROMERO	CENTRO
HERNANDEZ CORNEJO JULIO	APROBADO	TLAXCALA	SURESTE
HERNANDEZ CRUZ EDUARDO	SIN EVALUACIÓN	LEON	BAJIO
HERNANDEZ ESCOBAR ERICK	APROBADO	MORELIA	MICHOACAN
HERNANDEZ FERNANDEZ CARLOS	APROBADO	IZTACALCO	CENTRO
HERNANDEZ GONZALEZ GERARDO JAVIER	APROBADO	LEON	BAJIO
HERNANDEZ GUTIERREZ CARLOS IVAN	APROBADO	TUXTLA GUTIERREZ	SURESTE
HERNANDEZ JUAREZ JESUS SACRAMENTO	APROBADO	CUERNAVACA	SURESTE
HERNANDEZ MALDONADO FRANCISCO JAVIER	APROBADO	COLIMA	OCCIDENTE
HERNANDEZ PEREZ DANIEL	EXTRAORDINARIO	MORELIA	MICHOACAN
HERNANDEZ RAMOS DEMETRIO	SIN EVALUACIÓN	LEON	BAJIO
HERNANDEZ RODRIGUEZ FRANCISCO JAVIER	APROBADO	TLAXCALA	SURESTE
HERNANDEZ SANTIAGO JUAN CARLOS	SIN EVALUACIÓN	ATLACOMULCO	CENTRO
HERNANDEZ VEGA MANUEL ALEJANDRO	APROBADO	OBREGON	PACIFICO
HERRERA OLVERA JESUS ALFREDO	SIN EVALUACIÓN	MONTERREY	NORTE
HOLGUIN CORRALES JUAN RAMON	APROBADO	HERMOSILLO	PACIFICO
IBARRA RUBIO ENRIQUE	APROBADO	LOS MOCHIS	PACIFICO
INZUNZA AGUIRRE DAVID AARON	APROBADO	LA PAZ	PACIFICO
JIMENEZ CRISANTOS ALEXIS	APROBADO	ATLACOMULCO	CENTRO
JIMENEZ MARTINEZ FELIX	APROBADO	TLAJOMULCO	OCCIDENTE
JIMENEZ MARTINEZ REYMUNDO AGUSTIN	APROBADO	GUADALAJARA NORTE	OCCIDENTE
JUAREZ ARGOTE JUAN PABLO	APROBADO	LEON	BAJIO
JUAREZ BARRAZA JOSE AARON	APROBADO	PUERTO PEÑASCO	PACIFICO
JUAREZ CASTRO MISAEL	APROBADO	MEXICALI	PACIFICO
JUAREZ DE LA TORRE CRISTIAN MANUEL	APROBADO	GUADALAJARA	OCCIDENTE
JUAREZ LOPEZ FELIPE ENRIQUE	REPROBADO	SAN MIGUEL DE ALLENDE	BAJIO
JUAREZ XOCHIMITL ANDRES	APROBADO	PUEBLA	SURESTE
KU GARIBAY URIEL ARISAI	SIN EVALUACIÓN	MERIDA	PENINSULA
LAGUNA SANCHEZ MOISES	APROBADO	CELAYA	BAJIO
LARA FERNANDEZ PAULINO DAVID	APROBADO	XALAPA	GOLFO
LARA GONZALEZ PROSPERO	APROBADO	GUADALAJARA	OCCIDENTE
LARA MORALES LUIS BRANDON	APROBADO	LEON	BAJIO
LARA RIVERO JOSE JONATHAN	APROBADO	ZUMPANGO	CENTRO
LECHUGA GALINDO ANGEL EDUARDO	APROBADO	TORREON	NORTE
LEON NIETO MARIO ALBERTO	APROBADO	MORELIA	MICHOACAN
LEON RICO ALEJANDRO	APROBADO	ZAMORA	OCCIDENTE
LEYVA ARAIZA JORGE	APROBADO	PUEBLA	SURESTE
LEYVA CECEÑA FRANCISCO JASIEL	APROBADO	NOGALES	PACIFICO
LIMONES AGUILERA DANIEL ANDRES	APROBADO	TORREON	NORTE
LIRA GUZMAN BRUNO ESTEFANO	APROBADO	TLAJOMULCO	OCCIDENTE
LIRA MARTINEZ ERICK GUILLERMO	APROBADO	TOLUCA	CENTRO
LLAMAS MUÑOZ JOEL	APROBADO	TEPIC	OCCIDENTE
LOPEZ ACOSTA JOSE RENE	APROBADO	NAVOJOA	PACIFICO
LOPEZ BARRERAS MARCO ANTONIO	APROBADO	OBREGON	PACIFICO
LOPEZ COTA EDUARDO RAFAEL	APROBADO	OBREGON	PACIFICO
LOPEZ DE LA CRUZ GIOVANNI	APROBADO	AGUASCALIENTES	BAJIO
LOPEZ ENCINAS FRANCISCO JAVIER	APROBADO	HERMOSILLO	PACIFICO
LOPEZ FABIAN ANGEL JERONIMO	APROBADO	MORELIA	MICHOACAN
LOPEZ FLORES DAVID	APROBADO	IZTACALCO	CENTRO
LOPEZ GALAVIZ FRANCISCO JAIRO	APROBADO	DURANGO	NORTE
LOPEZ HERNANDEZ CARLOS AUGUSTO	APROBADO	VERACRUZ	GOLFO
LOPEZ HERNANDEZ OMAR OBED	APROBADO	TIJUANA	PACIFICO
LOPEZ OLIVA ANGEL GABRIEL	EXTRAORDINARIO	GUADALAJARA NORTE	OCCIDENTE
LOPEZ RAMIREZ JUAN JOSE	APROBADO	SAN MIGUEL DE ALLENDE	BAJIO
LOPEZ REYES IVAN DE JESUS	APROBADO	PUEBLA	SURESTE
LOPEZ RUIZ OMAR ANIBAL	APROBADO	LOS MOCHIS	PACIFICO
LOPEZ SANTOS DANIEL ROGELIO	APROBADO	TLAJOMULCO	OCCIDENTE
LOPEZ SEGURA JUAN JOSE	APROBADO	ZAMORA	OCCIDENTE
LOPEZ ZATARAIN JESUS	APROBADO	TORREON	NORTE
LORENZO MONTES CARLOS ALBERTO	APROBADO	COLIMA	OCCIDENTE
LOZANO ESPINOZA FABIAN	APROBADO	ZAPOPAN	OCCIDENTE
LUGO ALVAREZ RICARDO	APROBADO	GUADALAJARA	OCCIDENTE
MACIAS DIAZ LUIS GERARDO	APROBADO	LEON	BAJIO
MACIAS GUZMAN ARMANDO	APROBADO	GUADALAJARA	OCCIDENTE
MARIN CARMONA ERNESTO	APROBADO	TOLUCA	CENTRO
MARIN MOLINA CARLOS DANIEL	APROBADO	AGUASCALIENTES	BAJIO
MARIN ROMAN JORGE ORLANDO	SIN EVALUACIÓN	CULIACAN	PACIFICO
MARISCAL BONILLA ALEJANDRO	APROBADO	TONALA JAL	OCCIDENTE
MARISCAL CORDOVA JUAN DIEGO	APROBADO	GUADALAJARA NORTE	OCCIDENTE
MARTINEZ CRUZ JOSE MARIA	APROBADO	OBREGON	PACIFICO
MARTINEZ CRUZ PEDRO EMILIO	APROBADO	MORELIA	MICHOACAN
MARTINEZ GARCIA JUAN MANUEL	APROBADO	TEXCOCO	CENTRO
MARTINEZ GARCIA MARIANO GUADALUPE	APROBADO	GUADALAJARA	OCCIDENTE
MARTINEZ JIMENEZ DANIEL	APROBADO	TEHUACAN	SURESTE
MARTINEZ LANDEROS CESAR	APROBADO	GUADALAJARA NORTE	OCCIDENTE
MARTINEZ MACIAS ROSENDO	APROBADO	GUADALAJARA NORTE	OCCIDENTE
MARTINEZ MARTINEZ JAVIER	APROBADO	TLALNEPANTLA	CENTRO
MARTINEZ MEZA JOSE ROSARIO	APROBADO	CULIACAN	PACIFICO
MARTINEZ RAMIREZ MARCO ANTONIO	APROBADO	GUADALAJARA	OCCIDENTE
MARTINEZ ROSAS ABEL	APROBADO	GUADALAJARA	OCCIDENTE
MATA LIMON RAMON	APROBADO	GUADALAJARA	OCCIDENTE
MAURICIO QUINTANILLA VLADIMIR ALEXANDER	APROBADO	GUAYMAS	PACIFICO
MAZA AVENDAÑO JOAQUIN SALVADOR	APROBADO	TUXTLA GUTIERREZ	SURESTE
MEDINA ANDRADE LEONCIO	APROBADO	CULIACAN	PACIFICO
MEDINA QUIROZ ALAN ROBERTO	APROBADO	AGUASCALIENTES	BAJIO
MEDINA SALAZAR GILBERTO	APROBADO	LEON	BAJIO
MEDINA SARIÑANA PEDRO FABIAN	SIN EVALUACIÓN	CULIACAN	PACIFICO
MEDRANO URUETA BRAYAN ISIDRO	APROBADO	MORELIA	MICHOACAN
MELGAR RENTERAL IRVING MANUEL	APROBADO	VERACRUZ	GOLFO
MENDEZ LOPEZ RICARDO	SIN EVALUACIÓN	TUXTLA GUTIERREZ	SURESTE
MENDEZ SOLIS EDUARDO	APROBADO	FRESNILLO	BAJIO
MENDOZA AGUILAR DEYVID DANIEL	APROBADO	SALAMANCA	BAJIO
MENDOZA OLVERA JUAN DE DIOS	APROBADO	GUANAJUATO	BAJIO
MENESES MENDEZ MAURICIO	APROBADO	XALAPA	GOLFO
MEZA CUELLAR VILIULFO	APROBADO	ZAMORA	OCCIDENTE
MEZA MARQUEZ ADRIAN GUADALUPE	SIN EVALUACIÓN	LEON	BAJIO
MEZA MONTES NAIMAD ANTONIO	APROBADO	LOS MOCHIS	PACIFICO
MEZA PEREZ FRANCISCO	APROBADO	VERACRUZ	GOLFO
MICHEL SOLIS CESAR JAVIER	APROBADO	TORREON	NORTE
MIRANDA LOPEZ GEOVANNI	APROBADO	QUERETARO	BAJIO
MIRANDA JIMENEZ EDGAR	APROBADO	CUERNAVACA	SURESTE
MOLINA ALDANA HONORIO	APROBADO	GUADALAJARA	OCCIDENTE
MOLINA TRUJILLO EDUARDO	APROBADO	IZTACALCO	CENTRO
MONDRAGON FIERROS OSCAR	APROBADO	GUADALAJARA	OCCIDENTE
MONDRAGON ZARATE MANUEL	APROBADO	GUADALAJARA	OCCIDENTE
MONTELON ESPINOSA JUAN MANUEL	APROBADO	COLIMA	OCCIDENTE
MONTELONGO LINARES FABIAN HUMBERTO	EXTRAORDINARIO	LEON	BAJIO
MONTES AGUILAR PAUL NIVARDO	APROBADO	GUADALAJARA	OCCIDENTE
MONTIEL PAREDES REY GUADALUPE	APROBADO	HERMOSILLO	PACIFICO
MORA BELTRAN LUCIO	APROBADO	TLAJOMULCO	OCCIDENTE
MORA JUAREZ JOSUE	APROBADO	TLALNEPANTLA	CENTRO
MORA JUAREZ RUBEN	APROBADO	SALAMANCA	BAJIO
MORALES BENITEZ JORGE GABRIEL	APROBADO	VERACRUZ	GOLFO
MORALES BERNAL JORGE	APROBADO	CELAYA	BAJIO
MORENO CASTAÑEDA RICARDO	APROBADO	TONALA JAL	OCCIDENTE
MORALES CRUZ JOSE ALFREDO	APROBADO	TEXCOCO	CENTRO
MORALES GARZA LUIS ALFREDO	APROBADO	MONTERREY	NORTE
MORALES GONZALEZ PEDRO EDUARDO	APROBADO	TORREON	NORTE
MORALES LUNA MARIO ALAN	SIN EVALUACIÓN	AGUASCALIENTES	BAJIO
MORALES ORTIZ JORDAN DANIEL	EXTRAORDINARIO	GUADALAJARA	OCCIDENTE
MORAN MIRANDA ROBERTO	SIN EVALUACIÓN	TEHUANTEPEC	SURESTE
MORENO CASTAÑEDA RICARDO	APROBADO	TONALA JAL	OCCIDENTE
MORENO FIGUEROA LIONCIO	APROBADO	JOJUTLA	SURESTE
MORENO HERNANDEZ SALVADOR	SIN EVALUACIÓN	CULIACAN	PACIFICO
MORENO LEON OSCAR	APROBADO	CD JUAREZ	NORTE
MORENO RAMOS JUAN EDUARDO	APROBADO	PUEBLA	SURESTE
MORENO SAUCEDO JOSE ANDRES	APROBADO	LEON	BAJIO
MORQUECHO CALATA CARLOS IGNACIO	APROBADO	GUADALAJARA	OCCIDENTE
MULIA PALOMINO ADEMIR	APROBADO	TOLUCA	CENTRO
MUÑIZ LARA JUAN MANUEL	APROBADO	SAN LUIS POTOSI	BAJIO
MUÑIZ LOPEZ CATARINO	APROBADO	DURANGO	NORTE
MUÑOS GUERRA MARCOS	APROBADO	CELAYA	BAJIO
MUÑOZ FLORES JUAN CARLOS	APROBADO	ZAMORA	OCCIDENTE
NAJERA ESPINOSA LUIS ANTONIO	APROBADO	TUXTLA GUTIERREZ	SURESTE
NANGO SANCHEZ VICTOR MANUEL	APROBADO	TUXTLA GUTIERREZ	SURESTE
NIETO RAMIREZ ANDRES	APROBADO	SAN JUAN DEL RIO	BAJIO
NUÑEZ ROJO HECTOR RAMON	APROBADO	CULIACAN	PACIFICO
NUÑEZ SALINAS JORGE ALBERTO	APROBADO	AGUA PRIETA	PACIFICO
OCAMPO MEDELLIN GUSTAVO ALONSO	APROBADO	TEPIC	OCCIDENTE
OCOTITLA HERRERA FRANCISCO DANIEL	APROBADO	PUEBLA	SURESTE
OJEDA LOPEZ JOSE LUIS	APROBADO	MARTINEZ DE LA TORRE	GOLFO
OLEA HERNANDEZ JUAN CARLOS	APROBADO	ACAPULCO	SURESTE
OLMOS CONTRERAS MARIO	APROBADO	ATLACOMULCO	CENTRO
OLVERA IZAGUIRRE MARCO ANTONIO	APROBADO	LEON	BAJIO
OREA ROJAS URBANO	APROBADO	PUEBLA	SURESTE
OROPEZA NAVARRO RIGOBERTO	SIN EVALUACIÓN	TLALNEPANTLA	CENTRO
ORTEGA RAUDIA MANUEL ADRIAN	SIN EVALUACIÓN	LEON	BAJIO
ORTIZ ANDRADE ROGELIO ISMAEL	APROBADO	TECATE	PACIFICO
OSUNA ORTIZ CESAR MARTIN	APROBADO	MAZATLAN	PACIFICO
OZUNA CHOCOTECO VIDAL ANTONIO	APROBADO	TEPIC	OCCIDENTE
PADILLA GOMEZ JULIO CESAR	APROBADO	MORELIA	MICHOACAN
PALAFOX HERNANDEZ ROGELIO ENRIQUE	APROBADO	GUANAJUATO	BAJIO
PALOMINO CHONG ERIK SALVADOR	APROBADO	TORREON	NORTE
PARRA DIAZ LUIS SERGIO	APROBADO	NOGALES	PACIFICO
PAYAN GONZALEZ JESUS OCTAVIO	APROBADO	MAZATLAN	PACIFICO
PEÑA CALVARIO ANGEL	APROBADO	PUEBLA	SURESTE
PEÑA SALAZAR LUIS ANTONIO	SIN EVALUACIÓN	TOLUCA	CENTRO
PERAZA MENDOZA CARLOS ALBERTO	APROBADO	HERMOSILLO	PACIFICO
PERALTA SANCHEZ ABRAHAM	APROBADO	PUEBLA	SURESTE
PEREZ GARCIA MARCO ANTONIO	APROBADO	PUEBLA	SURESTE
PEREZ GONZALEZ AGUSTIN	APROBADO	TUXTLA GUTIERREZ	SURESTE
PEREZ LIZAMA JACOB ISAAC	APROBADO	QUERETARO	BAJIO
PEREZ PALOMINO EFREN ADRIAN	EXTRAORDINARIO	IRAPUATO	BAJIO
PEREZ PLATA MAURICIO	APROBADO	ZUMPANGO	CENTRO
PEREZ RAMIREZ MIGUEL ANGEL	APROBADO	TIJUANA	PACIFICO
PEREZ ZENTENO RICARDO	APROBADO	VILLAHERMOSA	PENINSULA
PINEDA ESCOBAR MARCO ANTONIO EMMANUEL	APROBADO	TOLUCA	CENTRO
PINEDA OLIVA ENRIQUE ALEXANDER	EXTRAORDINARIO	ACAPULCO	SURESTE
PIÑA GODINEZ GIOVANNI DAVID	APROBADO	LEON	BAJIO
PUGA REYES IRAK OMAR	SIN EVALUACIÓN	CANCUN	PENINSULA
PULIDO FLORES JUAN	APROBADO	PUEBLA	SURESTE
QUEVEDO CASTILLO JUAN CARLOS	APROBADO	TIJUANA	PACIFICO
QUINTANA ARAGON MANUEL DE JESUS	APROBADO	AGUA PRIETA	PACIFICO
QUITL BARRAGAN MIGUEL ANGEL	APROBADO	POZA RICA	GOLFO
RAMIREZ DIAZ ARMANDO	APROBADO	SALAMANCA	BAJIO
RAMIREZ LUNA AURELIO	REPROBADO	TLAJOMULCO	OCCIDENTE
RAMIREZ MENDEZ ERIK JASSIEL	APROBADO	PUEBLA	SURESTE
RAMIREZ MONTES JOSE MIGUEL	APROBADO	MEXICALI	PACIFICO
RAMIREZ MURILLO ANGEL	APROBADO	PUEBLA	SURESTE
RAMIREZ RODRIGUEZ FRANCISCO JAVIER	APROBADO	MORELIA	MICHOACAN
RAMIREZ SANTIAGO JOSE LUIS	APROBADO	OAXACA	SURESTE
RAMIREZ SILVA JOSE ALFONSO	APROBADO	TORREON	NORTE
RAMOS CRUZ JUAN ALBERTO	APROBADO	TAPACHULA	SURESTE
RAMOS MUÑOZ EUFEMIO	APROBADO	GUADALAJARA	OCCIDENTE
RAMOS POLANCO FRANCISCO JAVIER	APROBADO	TEPIC	OCCIDENTE
RANGEL MEDINA FRANCISCO EMMANUEL	SIN EVALUACIÓN	SAN LUIS POTOSI	BAJIO
RAVELO CONTRERAS JOSUE ISRAEL	APROBADO	DURANGO	NORTE
RENDON PEÑATE LUIS ANTONIO	APROBADO	PALENQUE	PENINSULA
REYES CHAIREZ CESAR OMAR	APROBADO	DURANGO	NORTE
REYES GONZALEZ LUIS ALFREDO	APROBADO	XALAPA	GOLFO
REYES MEZA HUMBERTO	APROBADO	PUEBLA	SURESTE
REYES SALAZAR HUGO CESAR	APROBADO	GUADALAJARA	OCCIDENTE
RIBOTA AMAYA SAMUEL	APROBADO	CD JUAREZ	NORTE
RIOS VARGAS JUAN CARLOS	APROBADO	LEON	BAJIO
RIVAS CHAVARRIA EDGAR ISRAEL	EXTRAORDINARIO	TEXCOCO	CENTRO
RIVAS GIRON ALFREDO	APROBADO	CABO SAN LUCAS	PACIFICO
RIVERA ANDRADE JOSE ALVARO	APROBADO	MORELIA	MICHOACAN
RIVERA CAMPAS HECTOR DANIEL	APROBADO	HERMOSILLO	PACIFICO
RIVERA CORONA JESUS RICARDO	SIN EVALUACIÓN	PUEBLA	SURESTE
RIVERA HERNANDEZ CRHISTIAN	APROBADO	PUEBLA	SURESTE
RIVERA MENDOZA MIGUEL ANGEL	APROBADO	VERACRUZ	GOLFO
ROCHA ESPARZA OMAR JORGE	APROBADO	LEON	BAJIO
ROCHA MARTINEZ CARLOS	APROBADO	SAN LUIS POTOSI	BAJIO
RODRIGUEZ ALVAREZ EDUARDO	APROBADO	TOLUCA	CENTRO
RODRIGUEZ CHAVEZ MARIO ARTURO	APROBADO	MAZATLAN	PACIFICO
RODRIGUEZ CRUZ ALAN CANDELARIO	APROBADO	HERMOSILLO	PACIFICO
RODRIGUEZ FLORES LUIS	APROBADO	LA PAZ	PACIFICO
RODRIGUEZ FRAGOZO JUAN FRANCISCO	SIN EVALUACIÓN	CULIACAN	PACIFICO
RODRIGUEZ GARCIA JOSE ISRAEL	EXTRAORDINARIO	PUEBLA	SURESTE
RODRIGUEZ HERNANDEZ JUAN DIEGO	APROBADO	GUADALAJARA NORTE	OCCIDENTE
RODRIGUEZ HERNANDEZ RIGOBERTO	APROBADO	GUADALAJARA NORTE	OCCIDENTE
RODRIGUEZ JUAREZ RUBEN OMAR	APROBADO	POZA RICA	GOLFO
RODRIGUEZ VALENZUELA ABRAHAM ANDORENY	SIN EVALUACIÓN	CD CONSTITUCION	PACIFICO
RODRIGUEZ VALLEJO VICTOR HUGO	APROBADO	MORELIA	MICHOACAN
RODRIGUEZ ZUÑIGA MERARI ABISAI	APROBADO	GUADALAJARA	OCCIDENTE
ROJAS ALVARADO JOSE RAMON	SIN EVALUACIÓN	MAZATLAN	PACIFICO
ROJAS LOPEZ ANGEL AUGUSTO	APROBADO	PUEBLA	SURESTE
ROMAN GARCIA JULIO	APROBADO	PUEBLA	SURESTE
ROMERO FLORES LUIS ABRAHAM	APROBADO	DURANGO	NORTE
ROMERO HARO DAVID	APROBADO	GUADALAJARA NORTE	OCCIDENTE
ROMERO RAMIREZ MIGUEL	APROBADO	TOLUCA	CENTRO
ROMERO SOLANO DANIEL	APROBADO	PUEBLA	SURESTE
ROMERO VALENZUELA JOSE ABDIEL	APROBADO	OBREGON	PACIFICO
ROMERO VERDUGO EMMANUEL	APROBADO	CULIACAN	PACIFICO
ROSALES LEYVA ADRIAN	APROBADO	CABO SAN LUCAS	PACIFICO
ROSALES MARTINEZ RAFAEL ANTONIO	APROBADO	OBREGON	PACIFICO
ROSALES RAMIREZ SERGIO ALFONSO	APROBADO	SAN MIGUEL DE ALLENDE	BAJIO
RUBIO CRUZ RAFAEL ANTONIO	APROBADO	MAZATLAN	PACIFICO
RUIZ BRAVO VICTOR	APROBADO	SAN MARTIN TEXMELUCAN	SURESTE
RUIZ SANCHEZ EDUARDO	APROBADO	IZTACALCO	CENTRO
RUIZ ZARATE HERIBERTO	APROBADO	DURANGO	NORTE
RUVALCABA VAZQUEZ LUIS FREDDY	APROBADO	TLAJOMULCO	OCCIDENTE
SAAVEDRA GRIJALVA LUIS GILBERTO	APROBADO	HERMOSILLO	PACIFICO
SAAVEDRA MORENO EDGAR MANUEL	SIN EVALUACIÓN	OAXACA	SURESTE
SALAS CASTAÑEDA ABRAHAM	APROBADO	LOS MOCHIS	PACIFICO
SALAS GUARNEROS CARLOS IVAN	APROBADO	PUEBLA	SURESTE
SALAZAR COLIN RAMON MAURICIO	APROBADO	GUADALAJARA	OCCIDENTE
SALCEDO GUERRERO ALEXIS	APROBADO	XALAPA	GOLFO
SALGADO SANCHEZ ALAN JOSUE	APROBADO	GUADALAJARA	OCCIDENTE
SAMANIEGO GONZALEZ LUIS ALBERTO	APROBADO	CULIACAN	PACIFICO
SANCHEZ BORBON JESUS MANUEL	APROBADO	NAVOJOA	PACIFICO
SANCHEZ HERAS SERGIO	APROBADO	CULIACAN	PACIFICO
SANCHEZ LOPEZ RAUL	SIN EVALUACIÓN	SANTA CATARINA	NORTE
SANCHEZ LUMBRERAS GALDINO	APROBADO	SANTA CATARINA	NORTE
SANCHEZ PONCE LUIS LORENZO	APROBADO	LOS MOCHIS	PACIFICO
SANCHEZ RIVERA JOSE ANDRES	APROBADO	TORREON	NORTE
SANCHEZ VELASQUEZ JOSE PRESILIANO	APROBADO	TOLUCA	CENTRO
SANTIAGO ARGUETA OSWALDO	SIN EVALUACIÓN	PUEBLA	SURESTE
SANTIAGO JIMENEZ DARIO	SIN EVALUACIÓN	QUERETARO	BAJIO
SANTILLAN CARVAJAL DANIEL	APROBADO	TEPIC	OCCIDENTE
ARAGON AGUILAR ARMANDO SANTOS	EXTRAORDINARIO	GUADALAJARA	OCCIDENTE
SANTOS DOMINGUEZ BRUNO ANTONIO	APROBADO	CHIHUAHUA	NORTE
SEGURA ROSALES JOSE MANUEL	APROBADO	LEON	BAJIO
SERNAS MARTINEZ OSCAR	APROBADO	PUEBLA	SURESTE
SERRANO ROSAS OSCAR JAVIER	APROBADO	GUADALAJARA	OCCIDENTE
SILVESTRE CAMPOSECO JOSE IGNACIO	APROBADO	MONTERREY	NORTE
SOLIS MORENO ANTONIO	APROBADO	CORDOBA	GOLFO
SOTELO VILLAGRANA JOSE RICARDO	APROBADO	HERMOSILLO	PACIFICO
SOTO HERNANDEZ SAUL DEL ROSARIO	EXTRAORDINARIO	VERACRUZ	GOLFO
SPINOSO ROBLES RAFAEL	APROBADO	CD JUAREZ	NORTE
TAMAYO TREJO GERARDO	APROBADO	QUERETARO	BAJIO
TENAHUA ROMERO FELIPE	APROBADO	PUEBLA	SURESTE
TINOCO RIOS JOSE ARTURO	APROBADO	DURANGO	NORTE
TLAHUIZO ROMERO JONATHAN ISRAEL	APROBADO	LOS MOCHIS	PACIFICO
TLACHINO SEVERIAN LUIS ANGEL	APROBADO	PUEBLA	SURESTE
TORBELLIN VIVEROS IRVING IGNACIO	APROBADO	XALAPA	GOLFO
TORRES CORONA MAURICIO	APROBADO	PUEBLA	SURESTE
TORRES DEL REAL JESUS ENRIQUE	APROBADO	DURANGO	NORTE
TORRES ESQUIVEL MIGUEL ANGEL	APROBADO	GUADALAJARA	OCCIDENTE
TORRES FRANCO PEDRO SANTIAGO	APROBADO	HERMOSILLO	PACIFICO
TORRES ORNELAS JOSE RAMON	APROBADO	TLAJOMULCO	OCCIDENTE
TORRES PORTILLO EDGAR ARTURO	APROBADO	SAN LUIS POTOSI	BAJIO
TORRES RABIA JORGE ADRIAN	APROBADO	IRAPUATO	BAJIO
TORRES RODRIGUEZ LUIS ALBERTO	APROBADO	COLIMA	OCCIDENTE
TOVAR HERNANDEZ LUIS ANTONIO	APROBADO	SAN MIGUEL DE ALLENDE	BAJIO
TRUJILLO TOLEDO GEOVANY	APROBADO	TEXCOCO	CENTRO
URIBE ENRIQUEZ LUIS ALEJANDRO	APROBADO	LOS MOCHIS	PACIFICO
USCANGA ARAUJO UBALDO DE JESUS EPIFANIO	APROBADO	VERACRUZ	GOLFO
VALDEZ DIAZ JAIRO JESUS	APROBADO	GUASAVE	PACIFICO
VALDEZ GONZALEZ GERARDO JAVIER	APROBADO	TIJUANA	PACIFICO
VALDEZ LARIOS JOAQUIN	APROBADO	PUEBLA	SURESTE
VALENCIA TECUA JOSE ARMANDO	SIN EVALUACIÓN	PUEBLA	SURESTE
VALENZUELA VELAZQUEZ MARIO ALBERTO	APROBADO	MEXICALI	PACIFICO
VALERDI ROSALES ALEJANDRO	APROBADO	PUEBLA	SURESTE
VALLE RODRIGUEZ JOCSAN	APROBADO	TLAQUEPAQUE	OCCIDENTE
VALLEJO SALAS JULIO ALBERTO	APROBADO	TOLUCA	CENTRO
VARELA HERNANDEZ JUAN CARLOS	APROBADO	TEPIC	OCCIDENTE
VARELA PONCE CHRISTIAN EMMANUEL	APROBADO	IZTACALCO	CENTRO
VARGAS REYES RAUL	APROBADO	PUEBLA	SURESTE
VARGAS VAZQUEZ JOSE ROBERTO	APROBADO	CORDOBA	GOLFO
VASQUEZ ARELLANO EDISSON MOISES	APROBADO	MEXICALI	PACIFICO
VASQUEZ CASTILLO JOEL ENRIQUE	APROBADO	XALAPA	GOLFO
VAZQUEZ BELTRAN MANUEL JESUS	APROBADO	CHAMPOTON	PENINSULA
VAZQUEZ DE JESUS JULIAN	APROBADO	POZA RICA	GOLFO
VAZQUEZ HERRERA OSIEL ANTONIO	APROBADO	DURANGO	NORTE
VAZQUEZ MEDINA OSVALDO ALEJANDRO	APROBADO	GUADALAJARA NORTE	OCCIDENTE
VAZQUEZ OJEDA FERNANDO ENRIQUE	APROBADO	AGUASCALIENTES	BAJIO
VAZQUEZ PEREZ LUIS FERNANDO	APROBADO	TUXTLA GUTIERREZ	SURESTE
VAZQUEZ SANCHEZ RICARDO	APROBADO	CELAYA	BAJIO
VEGA GONZALEZ RAUL	APROBADO	QUERETARO	BAJIO
VELAZQUEZ CHAVEZ SERGIO ANTONIO	APROBADO	CHIHUAHUA	NORTE
VELAZQUEZ TIZOC JESUS HERIBERTO	APROBADO	CULIACAN	PACIFICO
VENEGAS FLORES EDGAR ANDRES	APROBADO	TEPIC	OCCIDENTE
VENEGAS GONZALEZ FRANCISCO DANIEL	APROBADO	GUADALAJARA	OCCIDENTE
VENTURA SANTIAGO ELIEZER	APROBADO	SAN LUIS POTOSI	BAJIO
VERA CORNEJO JUAN ANTONIO	APROBADO	TONALA JAL	OCCIDENTE
VILLAGRANA AVILA RODOLFO	APROBADO	TORREON	NORTE
VILLALOBOS ALCALA ANGEL RICARDO	APROBADO	GUADALAJARA	OCCIDENTE
VILLALOBOS HERNANDEZ ANGEL ERNESTO	APROBADO	GUADALAJARA NORTE	OCCIDENTE
VILLARREAL IMPERIAL JOSUE YOSIMAR	APROBADO	CULIACAN	PACIFICO
VIRGEN ESCALANTE BRYAN ULISES	APROBADO	GUAYMAS	PACIFICO
VIRGEN VARGAS FRANCISCO JAVIER	APROBADO	TLAJOMULCO	OCCIDENTE
VIRGEN VETERANO SERGIO SANTIAGO	APROBADO	GUADALAJARA	OCCIDENTE
YA CAAMAL FRANCISCO ALFONSO	SIN EVALUACIÓN	CANCUN	PENINSULA
YOUNG CANIZALES RAMON ALBERTO	APROBADO	HUATABAMPO	PACIFICO
ZAMUDIO ZIZUMBO RUBEN	APROBADO	MORELIA	MICHOACAN`;

        // --- Variables Globales ---
        let globalProcessedRegionData = [];
        let globalProcessedSucursalData = [];
        let regionBarChartInstance = null;
        let paretoRegionChartInstance = null; // <-- Añadido
        let paretoSucursalChartInstance = null; 
        let kpiDoughnutChartInstance = null; 
        let globalKPIs = {}; 
        let currentRegionFilter = null;
        const estatusEvaluado = ["APROBADO", "REPROBADO", "EXTRAORDINARIO"];

        // --- Función Principal de Procesamiento ---
        function procesarDatos() {
            const filas = rawData.split('\n').slice(1); // Omitir encabezado
            const statsByRegion = {};
            const statsBySucursal = {};

            filas.forEach(fila => {
                const columnas = fila.split('\t');
                if (columnas.length < 4) return; // Omitir filas incompletas

                const evaluacion = columnas[1].trim();
                const sucursal = columnas[2].trim(); 
                const region = columnas[3].trim(); 

                // --- Lógica de descarte de ND ---
                // Si la región es #N/D o está vacía, ignorar esta fila por completo
                if (region === '#N/D' || region === '') {
                    return; 
                }

                // --- Procesar por Región ---
                if (!statsByRegion[region]) {
                    statsByRegion[region] = {
                        total: 0,
                        APROBADO: 0,
                        REPROBADO: 0,
                        EXTRAORDINARIO: 0,
                        SIN_EVALUACION: 0
                    };
                }
                
                // --- LÓGICA CORREGIDA (de nuevo) ---
                // Contar solo categorías válidas
                if (evaluacion === 'APROBADO') {
                    statsByRegion[region].APROBADO++;
                    statsByRegion[region].total++; 
                } else if (evaluacion === 'REPROBADO') {
                    statsByRegion[region].REPROBADO++;
                    statsByRegion[region].total++; 
                } else if (evaluacion === 'EXTRAORDINARIO') {
                    statsByRegion[region].EXTRAORDINARIO++;
                    statsByRegion[region].total++; 
                } else if (evaluacion === 'SIN EVALUACIÓN') {
                    statsByRegion[region].SIN_EVALUACION++;
                    statsByRegion[region].total++; 
                }
                // Las filas con evaluacion '#N/D' u otra cosa ahora se ignoran del total
                
                // --- Procesar por Sucursal ---
                // (Ya sabemos que la región es válida, así que la sucursal también lo será)
                if (!statsBySucursal[sucursal]) {
                    statsBySucursal[sucursal] = {
                        total: 0,
                        evaluados: 0,
                        sin_evaluacion: 0, 
                        region: region 
                    };
                }
                
                if (estatusEvaluado.includes(evaluacion)) {
                    statsBySucursal[sucursal].evaluados++;
                    statsBySucursal[sucursal].total++; 
                } else if (evaluacion === 'SIN EVALUACIÓN') { 
                    statsBySucursal[sucursal].sin_evaluacion++;
                    statsBySucursal[sucursal].total++; 
                }
            });

            // --- Procesamiento de Regiones ---
            globalProcessedRegionData = Object.keys(statsByRegion).map(region => {
                const data = statsByRegion[region];
                const evaluados = data.APROBADO + data.REPROBADO + data.EXTRAORDINARIO;
                const porcentaje = (data.total > 0) ? (evaluados / data.total) * 100 : 0;

                return {
                    region,
                    total: data.total,
                    evaluados,
                    porcentaje,
                    aprobado: data.APROBADO,
                    reprobado: data.REPROBADO,
                    extraordinario: data.EXTRAORDINARIO,
                    sin_evaluacion: data.SIN_EVALUACION
                };
            });

            // Ordenar por porcentaje descendente
            globalProcessedRegionData.sort((a, b) => b.porcentaje - a.porcentaje);

            // --- Rellenar KPIs ---
            const totalGeneral = globalProcessedRegionData.reduce((acc, curr) => acc + curr.total, 0);
            const totalEvaluadosGeneral = globalProcessedRegionData.reduce((acc, curr) => acc + curr.evaluados, 0);
            const totalPendientesGeneral = globalProcessedRegionData.reduce((acc, curr) => acc + curr.sin_evaluacion, 0);
            const porcentajeGeneral = (totalGeneral > 0) ? (totalEvaluadosGeneral / totalGeneral) * 100 : 0;
            
            // Guardar KPIs globales
            globalKPIs = {
                total: totalGeneral,
                evaluados: totalEvaluadosGeneral,
                sin_evaluacion: totalPendientesGeneral,
                porcentaje: porcentajeGeneral
            };

            // Renderizar KPIs iniciales
            updateKPIs(globalKPIs);

            // --- Rellenar Tabla de Desglose Región ---
            const tablaDesgloseBody = document.getElementById('tabla-desglose-body');
            tablaDesgloseBody.innerHTML = ''; // Limpiar "cargando"

            globalProcessedRegionData.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'border-b border-slate-100 hover:bg-gray-100';
                row.innerHTML = `
                    <td class="p-2 text-sm font-medium text-slate-900">${item.region}</td>
                    <td class="p-2 text-sm text-slate-700 text-center">${item.aprobado}</td>
                    <td class="p-2 text-sm text-slate-700 text-center">${item.reprobado}</td>
                    <td class="p-2 text-sm text-slate-700 text-center">${item.extraordinario}</td>
                    <td class="p-2 text-sm text-slate-700 text-center">${item.sin_evaluacion}</td>
                `;
                tablaDesgloseBody.appendChild(row);
            });
            // --- Procesar datos de Sucursal ---
            globalProcessedSucursalData = Object.keys(statsBySucursal).map(sucursal => {
                const data = statsBySucursal[sucursal];
                const porcentaje = (data.total > 0) ? (data.evaluados / data.total) * 100 : 0;
                return {
                    sucursal,
                    region: data.region, // <-- Guardar la región
                    total: data.total,
                    evaluados: data.evaluados,
                    sin_evaluacion: data.sin_evaluacion, 
                    porcentaje
                };
            });

            // NOTA: La ordenación por % se hace dentro de renderTablaSucursal

            // --- Renderizar Tabla de Sucursal (Llamada inicial) ---
            renderTablaSucursal(currentRegionFilter);

            // --- Renderizar Gráficos Pareto ---
            renderParetoRegion(globalProcessedRegionData, globalKPIs.sin_evaluacion);
            // La llamada inicial para el pareto de sucursal
            renderParetoSucursal(globalProcessedSucursalData, globalKPIs.sin_evaluacion, null); // null = global


            // --- Generar Gráfico KPI (Dona) ---
            renderDoughnutChart(globalKPIs.porcentaje);

            // --- Generar Gráfico de Barras (Región) ---
            const ctxBar = document.getElementById('regionBarChart').getContext('2d');
            const labels = globalProcessedRegionData.map(item => item.region);
            const data = globalProcessedRegionData.map(item => item.porcentaje);
            const regionBGColors = globalProcessedRegionData.map(item => getColor(item.region)); // <-- Colores dinámicos

            if (regionBarChartInstance) {
                regionBarChartInstance.destroy();
            }
            
            regionBarChartInstance = new Chart(ctxBar, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: '% Avance',
                        data: data,
                        backgroundColor: regionBGColors, // <-- ACTUALIZADO
                        borderRadius: 6,
                        barPercentage: 0.6,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    // --- MANEJADOR DE CLIC ---
                    onClick: (event, elements) => {
                        let newFilter = null;
                        let regionStats = null; // Para guardar los stats de la región
                        
                        if (elements.length > 0) {
                            const i = elements[0].index;
                            // Asegurarse de que el índice está dentro de los límites
                            if (i < globalProcessedRegionData.length) {
                                const region = globalProcessedRegionData[i].region;
                                // Alternar filtro: si se hace clic en la misma barra, se desactiva
                                if (currentRegionFilter !== region) {
                                    newFilter = region;
                                    // Encontrar los stats para esta región
                                    regionStats = globalProcessedRegionData.find(r => r.region === newFilter);
                                }
                            }
                        }
                        
                        // Actualizar el filtro global
                        currentRegionFilter = newFilter;
                        
                        // 1. Volver a renderizar la tabla de sucursales
                        renderTablaSucursal(currentRegionFilter);
                        
                        // 2. Actualizar los colores del gráfico de barras
                        const bgColors = globalProcessedRegionData.map(item => 
                            (currentRegionFilter === null || currentRegionFilter === item.region) 
                            ? getColor(item.region) // <-- ACTUALIZADO
                            : '#d1d5db' // Color inactivo (gray-300)
                        );
                        
                        if (regionBarChartInstance) {
                            regionBarChartInstance.data.datasets[0].backgroundColor = bgColors;
                            regionBarChartInstance.update();
                        }

                        // --- NUEVAS ACCIONES ---

                        // 3. Actualizar KPIs y Gráfico de Dona
                        if (currentRegionFilter && regionStats) {
                            updateKPIs(regionStats);
                            renderDoughnutChart(regionStats.porcentaje);
                        } else {
                            updateKPIs(globalKPIs); // Volver a globales
                            renderDoughnutChart(globalKPIs.porcentaje);
                        }
                        
                        // 4. Actualizar Pareto de Sucursal
                        let sucursalDataForPareto = globalProcessedSucursalData;
                        let totalPendientesForPareto = globalKPIs.sin_evaluacion;
                        
                        if (currentRegionFilter && regionStats) {
                            // Filtrar sucursales por la región seleccionada
                            sucursalDataForPareto = globalProcessedSucursalData.filter(s => s.region === currentRegionFilter);
                            totalPendientesForPareto = regionStats.sin_evaluacion;
                        }
                        
                        renderParetoSucursal(sucursalDataForPareto, totalPendientesForPareto, currentRegionFilter);
                    },
                    // --- FIN DE MANEJADOR DE CLIC ---
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `Avance: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: {
                                color: '#e5e7eb' // gray-200
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        // --- Nueva Función: Renderizar Tabla de Sucursal ---
        function renderTablaSucursal(filterRegion = null) {
            const tablaSucursalBody = document.getElementById('tabla-sucursal-body');
            const titleEl = document.getElementById('sucursal-title');
            tablaSucursalBody.innerHTML = ''; // Limpiar

            let dataToRender = globalProcessedSucursalData;

            // Aplicar filtro si existe
            if (filterRegion) {
                dataToRender = globalProcessedSucursalData.filter(item => item.region === filterRegion);
                titleEl.innerText = `Avance por Sucursal (Región: ${filterRegion})`;
            } else {
                titleEl.innerText = 'Avance por Sucursal';
            }

            // Ordenar por porcentaje descendente DESPUÉS de filtrar
            dataToRender.sort((a, b) => b.porcentaje - a.porcentaje);

            if (dataToRender.length === 0) {
                tablaSucursalBody.innerHTML = '<tr><td colspan="3" class="text-center p-6 text-slate-500">No hay sucursales para esta región.</td></tr>';
                return;
            }

            dataToRender.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'border-b border-slate-100 hover:bg-gray-100';
                
                const sucursalCell = `<td class="p-3 text-sm font-medium text-slate-900">${item.sucursal}</td>`;
                
                const avanceCell = `
                    <td class="p-3">
                        <div class="flex items-center space-x-2">
                            <div class="w-full bg-slate-200 rounded-full h-2.5">
                                <div class="h-2.5 rounded-full" style="width: ${item.porcentaje.toFixed(1)}%; background-color: ${getColor(item.region)}"></div>
                            </div>
                            <span class="text-sm font-medium text-slate-600 w-12 text-right">${item.porcentaje.toFixed(1)}%</span>
                        </div>
                    </td>
                `;
                
                const fraccionCell = `<td class="p-3 text-sm text-slate-600 font-medium text-right">${item.evaluados} / ${item.total}</td>`;

                row.innerHTML = sucursalCell + avanceCell + fraccionCell;
                tablaSucursalBody.appendChild(row);
            });
        }

        // --- Nuevas Funciones de Pareto ---

        // Nueva: Actualizar KPIs dinámicamente
        function updateKPIs(data) {
            const porcentaje = data.porcentaje || 0;
            document.getElementById('kpi-total-tecnicos').innerText = data.total;
            document.getElementById('kpi-total-evaluados').innerText = data.evaluados;
            document.getElementById('kpi-total-pendientes').innerText = data.sin_evaluacion;
            document.getElementById('kpi-porcentaje-general-text').innerText = `${porcentaje.toFixed(1)}%`;
            
            // Actualizar también el texto del gráfico de dona
            document.getElementById('kpi-porcentaje-general').innerText = `${porcentaje.toFixed(1)}%`;
            document.getElementById('kpi-fraccion-general').innerText = `${data.evaluados} / ${data.total}`;
        }

        // Nueva: Renderizar Gráfico de Dona dinámicamente
        function renderDoughnutChart(porcentaje) {
            if (kpiDoughnutChartInstance) {
                kpiDoughnutChartInstance.destroy();
            }
            const ctxDoughnut = document.getElementById('kpi-chart-general').getContext('2d');
            kpiDoughnutChartInstance = new Chart(ctxDoughnut, {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: [porcentaje, 100 - porcentaje],
                        backgroundColor: [
                            '#3b82f6', // blue-500
                            '#e5e7eb'  // gray-200
                        ],
                        borderWidth: 0,
                        borderRadius: 8,
                    }]
                },
                options: {
                    cutout: '80%',
                    responsive: true,
                    plugins: {
                        tooltip: { enabled: false }
                    },
                    events: []
                }
            });
        }

        function renderParetoRegion(regionData, totalPendientes) {
            if (paretoRegionChartInstance) {
                paretoRegionChartInstance.destroy();
            }
            
            const ctx = document.getElementById('paretoRegionChart').getContext('2d');
            
            // Sort by pendientes descending
            const sortedData = [...regionData].filter(d => d.sin_evaluacion > 0).sort((a, b) => b.sin_evaluacion - a.sin_evaluacion);
            
            if (sortedData.length === 0) {
                 // Ocultar o limpiar el gráfico si no hay pendientes
                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                ctx.font = "16px Inter";
                ctx.fillStyle = "#64748b"; // slate-500
                ctx.textAlign = "center";
                ctx.fillText("¡No hay técnicos pendientes!", ctx.canvas.width / 2, ctx.canvas.height / 2);
                return; // No dibujar nada más
            }

            const labels = sortedData.map(d => d.region);
            const pendingCounts = sortedData.map(d => d.sin_evaluacion);
            const colors = sortedData.map(d => getColor(d.region));

            let cumulative = 0;
            const cumulativePct = sortedData.map(d => {
                cumulative += d.sin_evaluacion;
                return (totalPendientes > 0) ? (cumulative / totalPendientes) * 100 : 0;
            });
            
            paretoRegionChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Técnicos Pendientes',
                            data: pendingCounts,
                            backgroundColor: colors,
                            borderRadius: 6,
                            barPercentage: 0.6,
                            yAxisID: 'y-bar',
                        },
                        {
                            label: '% Acumulado (Pareto)',
                            data: cumulativePct,
                            type: 'line',
                            borderColor: '#ef4444', // red-500
                            backgroundColor: '#ef4444',
                            borderWidth: 2,
                            pointRadius: 3,
                            yAxisID: 'y-line',
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: true, position: 'bottom' } },
                    scales: {
                        y: { display: false }, // Ocultar eje Y principal
                        'y-bar': {
                            type: 'linear',
                            position: 'left',
                            beginAtZero: true,
                            title: { display: true, text: 'N° de Pendientes' },
                            grid: { display: false }
                        },
                        'y-line': {
                            type: 'linear',
                            position: 'right',
                            min: 0,
                            max: 100,
                            title: { display: true, text: '% Acumulado' },
                            ticks: { callback: value => value.toFixed(0) + '%' }
                        },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        function renderParetoSucursal(sucursalData, totalPendientes, regionFilter = null) {
            if (paretoSucursalChartInstance) {
                paretoSucursalChartInstance.destroy(); // Destruir el gráfico anterior
            }
            const ctx = document.getElementById('paretoSucursalChart').getContext('2d');
            const titleEl = document.getElementById('pareto-sucursal-title');
            const descEl = document.getElementById('pareto-sucursal-desc');
            
            if (totalPendientes === 0) {
                let msg = "¡No hay técnicos pendientes!";
                if(regionFilter) {
                    titleEl.innerText = `Pareto de Pendientes (Sucursales de ${regionFilter})`;
                    descEl.innerText = `No hay técnicos pendientes en esta región.`;
                    msg = "No hay técnicos pendientes en esta región.";
                } else {
                    titleEl.innerText = 'Pareto de Pendientes (Global)';
                    descEl.innerText = 'No hay técnicos pendientes en ninguna sucursal.';
                }
                
                ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                 ctx.font = "16px Inter";
                ctx.fillStyle = "#64748b"; // slate-500
                ctx.textAlign = "center";
                ctx.fillText(msg, ctx.canvas.width / 2, ctx.canvas.height / 2);
                return; 
            }
            
            // Sort by pendientes descending
            let sortedData = [...sucursalData].sort((a, b) => b.sin_evaluacion - a.sin_evaluacion);
            
            let dataForChart;
            if (regionFilter) {
                // Si hay un filtro de región, mostrar todas sus sucursales (ya está filtrada la data)
                dataForChart = sortedData.filter(d => d.sin_evaluacion > 0); // Solo mostrar las que tienen pendientes
                titleEl.innerText = `Pareto de Pendientes (Sucursales de ${regionFilter})`;
                descEl.innerText = `Sucursales de ${regionFilter} ordenadas por técnicos pendientes.`;
            } else {
                // Vista global: Limitar al Top 20
                dataForChart = sortedData.filter(d => d.sin_evaluacion > 0).slice(0, 20);
                titleEl.innerText = 'Pareto de Pendientes (Top 20 Sucursales)';
                descEl.innerText = 'Las 20 sucursales (global) con más técnicos pendientes.';
            }

            // Si después de filtrar (especialmente para región) no hay data, mostrar mensaje
            if (dataForChart.length === 0) {
                 titleEl.innerText = `Pareto de Pendientes (Sucursales de ${regionFilter})`;
                 descEl.innerText = 'No hay técnicos pendientes en esta región.';
                 ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                 ctx.font = "16px Inter";
                 ctx.fillStyle = "#64748b"; // slate-500
                 ctx.textAlign = "center";
                 ctx.fillText("No hay técnicos pendientes en esta región.", ctx.canvas.width / 2, ctx.canvas.height / 2);
                 return;
            }

            const labels = dataForChart.map(d => d.sucursal);
            const pendingCounts = dataForChart.map(d => d.sin_evaluacion);
            const colors = dataForChart.map(d => getColor(d.region));

            let cumulative = 0;
            // OJO: El total para el % acumulado debe ser el total del subconjunto (o el global)
            // 'totalPendientes' ya es el total correcto (sea global o de la región)
            const cumulativePct = dataForChart.map(d => {
                cumulative += d.sin_evaluacion;
                const pct = (totalPendientes > 0) ? (cumulative / totalPendientes) * 100 : 0;
                return pct;
            });

            paretoSucursalChartInstance = new Chart(ctx, { // Asignar a la variable global
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Técnicos Pendientes',
                            data: pendingCounts,
                            backgroundColor: colors,
                            borderRadius: 6,
                            barPercentage: 0.6,
                            yAxisID: 'y-bar',
                        },
                        {
                            label: '% Acumulado (Pareto)',
                            data: cumulativePct,
                            type: 'line',
                            borderColor: '#ef4444', // red-500
                            backgroundColor: '#ef4444',
                            borderWidth: 2,
                            pointRadius: 3,
                            yAxisID: 'y-line',
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { 
                        legend: { display: true, position: 'bottom' },
                        tooltip: {
                            callbacks: {
                                footer: function(tooltipItems) {
                                    // Añadir la región al tooltip
                                    const index = tooltipItems[0].dataIndex;
                                    const region = dataForChart[index].region; // Usar dataForChart
                                    return `Región: ${region}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: { display: false },
                        'y-bar': {
                            type: 'linear',
                            position: 'left',
                            beginAtZero: true,
                            title: { display: true, text: 'N° de Pendientes' },
                            grid: { display: false }
                        },
                        'y-line': {
                            type: 'linear',
                            position: 'right',
                            min: 0,
                            max: 100,
                            title: { display: true, text: '% Acumulado' },
                            ticks: { callback: value => value.toFixed(0) + '%' }
                        },
                        x: { 
                            grid: { display: false },
                            ticks: {
                                autoSkip: false, // Mostrar todas las etiquetas
                                maxRotation: 90, // Rotar etiquetas
                                minRotation: 45
                            }
                        }
                    }
                }
            });
        }

        // Ejecutar el procesamiento cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', procesarDatos);
    </script>
</body>
</html>









































